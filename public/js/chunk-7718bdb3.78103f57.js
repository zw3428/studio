(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7718bdb3","chunk-5d7fb187","chunk-5d7fb187"],{"27f4":function(t,e,n){},"6ea5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tk-position-relative text-center",staticStyle:{width:"fit-content",margin:"0 auto"}},[n("div",{staticClass:"btn base-button tk-button tk-px-margin-right-px0 text-center",staticStyle:{opacity:"0","box-shadow":"none"},style:{width:""===t.width?"fit-content":t.width+"px"}},[n("span",[t._v(t._s(t.text))])]),n("svg",{ref:"loading",staticStyle:{width:"80px",height:"80px",position:"absolute",transform:"translate(-50%, -50%)",left:"50%",top:"50%",display:"none"},attrs:{id:"loading",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100","enable-background":"new 0 0 0 0","xml:space":"preserve"}},[n("path",{attrs:{fill:"#71d9c2",d:"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50",transform:"rotate(188.223 50 50)"}},[n("animateTransform",{attrs:{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"}})],1)]),n("div",{ref:"tkButton",staticClass:"btn base-button tk-button tk-px-margin-right-px0 tk-position-absolute text-center",class:{"tk-bg-color-main":"main"===t.type,"tk-bg-color-gray-200":"disable"===t.type,"tk-font-color-white":"disable"!==t.type,"tk-font-color-gray":"disable"===t.type},staticStyle:{left:"50%",top:"50%",transform:"translate(-50%, -50%)","white-space":"nowrap"},style:{width:""===t.width?"fit-content":t.width+"px"},attrs:{id:"tkButton"},on:{click:t.handleClick}},[n("span",{ref:"tkButtonText",attrs:{id:"tkButtonText"}},[t._v(t._s(t.text))])])])},o=[],i=n("a336"),s=n.n(i),r={name:"button-with-loading",props:{text:{type:String,default:"Button",description:"按钮文本"},type:{default:"main",description:"按钮类型： main(可点击), disable(不可点击)"},complete:{type:Boolean,default:!1,description:"是否完成请求"},width:{type:String,description:"自定义宽度，默认 fit-content"}},data:function(){return{}},watch:{complete:function(t,e){t&&this.stopLoading()}},methods:{handleClick:function(t){var e=this,n=e.$refs.tkButtonText,a=e.$refs.tkButton,o=e.$refs.loading;"disable"!==e.type&&(s()(n).stop().animate({opacity:0},100),s()(a).stop().animate({width:"40px",borderRadius:"40px"},200,(function(){s()(a).stop().fadeOut(),s()(o).stop().fadeIn(),e.$emit("start")})))},stopLoading:function(){var t=this,e=t.$refs.tkButtonText,n=t.$refs.tkButton,a=t.$refs.loading;s()(a).stop().fadeOut("normal"),s()(n).stop().fadeIn("normal",(function(){s()(n).animate({width:"100%",borderRadius:"0.25rem"},200,(function(){s()(e).stop().animate({opacity:1},100,(function(){t.$emit("end")}))}))}))}}},l=r,c=(n("c159"),n("5d22")),p=Object(c["a"])(l,a,o,!1,null,"0ecd66ec",null);e["default"]=p.exports},"746c":function(t){t.exports=JSON.parse('{"type":"service_account","project_id":"tunekey-2019","private_key_id":"d9f699ca8c53f9694506a29b1e17d54c829d0dea","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDFI0MSx/3e6Mei\\n02oZxzTvKqBQXeijvwbpFJ0FvgclEHIofXM9WIFV9i7hapgR8iVDjVrr0BzZDI5L\\nrzueou2HRm6n6LWWCqZ6gQsY6EOtfkK18AhEgUKhXmhS2prKCc3n2M/GXY8s0qUp\\nkhkw1kA2wkinueByixwde0f8yb8v9J7CSSDDdUABF40BLsb1glBh2/65HrXII6RS\\nkCqXfZ7dbqOOCxCa4C+7BXia+Ky6HGHj7T7bKugAb5GsdhnQaQRdN+nSXF3KxUxK\\n6Td/KIW94P5oBPDQ3V6BkgPFRzIqh1Zi5Tvyk483ntt//PCPdYo4enxrEuNNO94J\\n3VF4ZyaNAgMBAAECggEAFINoUdZ8rMrVJzTPmBIaCH8LgoFbGVrh2bQa6MOO08UD\\n1AHF0Y7ZmnvNAgjI/SkQxpg5a0tTDSTY07hOwGGczNQ/5Hn7FztRenLeGD/m9vEp\\n+OuauKIosEj2GxUDQV3GzsbJTA9lPBlJNWut8l6A/RG3ZLibSd/+03SGF6BYpCEl\\n6RsikjqG3CkFg3hjp9mL3xWH9GIdvX0+CzDW1/InrzACFQllBIX9ksIgRn3Oinpw\\nPb4MC4s/5AAmjnqXO7YgPRqRLCQVXZtuGjZDP8eXXoWrTqC95JRK0YjAvw0D6QQq\\nKjHHiAew/XwU/TbHlVDad2gNsdANY1z5ZGj7YM4h0wKBgQDsoWo0ykr93TJoiMqF\\nNqCnblBnoG0cnHR7bGyH2ii5GvV7+fhA1IZxANaPlAf9bhKekUoTLtpCv9XWk8XZ\\n3QTP9tdPrn1MpMfFihSDVEWC3iPEDxJibqfWg1ogW27P1OjThATXc0wQuRcS2fLi\\nvPhsv2fVBU7NRtrw98semYrTZwKBgQDVRkbv04JlxuB7JipKjvRwrMS0eWlPwiSQ\\nIoaWmohb8IuwXs5RpT2RbThQB+Tz1VIOPqMHRnWkn6FGLNKljv9gLlabM8J7AJvX\\nSek9QoYYeUFRFc5xR04flWyjspsHBMZ3Edtty5t4EYNkhRaeWGm3JkdpZ/2Dh9HV\\nw1FxGaDR6wKBgGoQA6m7zpcxUUnXnmbNUH8bjACWwLFlUzSLKa5O05f8hHHYXjS4\\nzbXS+VkLsfUfJEtctgYZJw1qLO/r9m+riF+qtWFqxZDX/w8E0CL5X9rDtOZJFyV1\\nkdctsvTz5pxTQzSjZQQpErwgKj5x4FNO/k7IEENECMkr7DC78Jg7nCUbAoGBAJPr\\nUBvaKKCKVPtUtxRLHgJf8XXylzX4Qv+s0of12glaRqgmuRYrcw5AIERxlTwAgg7b\\nJptPJRzukh5nzBmDml+NBAhU19gTzgJ9gsU4NGUZBFJGu44ZlHeXXWgT4i32A+hl\\nfDkkdEnMa8L2A4ADdh7O78yNkWj+dGy8MOouijnNAoGBAKyATHmU+HDAxw4P89Ti\\nvk7PbOLvYO6KNE4uEAYC0JU8IEzsY7ahyUr9+C8Z8WDq6nkcn9aNrZYHBIWEb6ce\\nz/xO2zMeQ/K027g2tZrV64wIoUWncIe2us/Fpsic60nZFQGN1H4vcVsZHOxK7sXy\\nPsb1yMQ9Rc47d5pX86TrIKKz\\n-----END PRIVATE KEY-----\\n","client_email":"tunekey-2019@tunekey-2019.iam.gserviceaccount.com","client_id":"102199199293676787688","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/tunekey-2019%40tunekey-2019.iam.gserviceaccount.com"}')},7922:function(t,e,n){"use strict";n("a169")},a169:function(t,e,n){},c159:function(t,e,n){"use strict";n("27f4")},f150:function(t,e,n){"use strict";n.r(e);var a,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticClass:"table-responsive align-items-center table-flush",attrs:{"header-row-class-name":"thead-light",data:t.data}},[n("el-table-column",{attrs:{label:"Name","min-width":"140px",prop:"name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("input",{directives:[{name:"model",rawName:"v-model",value:a.name,expression:"row.name"}],staticClass:"form-control form-control-muted tk-border-bottom tk-font-color-black1",staticStyle:{padding:"0 !important","background-color":"transparent !important"},attrs:{type:"text",placeholder:t.initName(a.name)},domProps:{value:a.name},on:{focus:function(e){e.preventDefault(),t.name=a.name},blur:function(e){return e.preventDefault(),t.saveName(a)},input:function(e){e.target.composing||t.$set(a,"name",e.target.value)}}})]}}])}),n("el-table-column",{attrs:{label:"Email","min-width":"140px",prop:"email",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("input",{directives:[{name:"model",rawName:"v-model",value:a.email,expression:"row.email"}],staticClass:"form-control form-control-muted tk-border-bottom tk-font-color-black1",staticStyle:{padding:"0 !important","background-color":"transparent !important"},attrs:{type:"email",placeholder:t.initEmail(a.email)},domProps:{value:a.email},on:{focus:function(e){e.preventDefault(),t.email=a.email},blur:function(e){return e.preventDefault(),t.saveEmail(a)},input:function(e){e.target.composing||t.$set(a,"email",e.target.value)}}})]}}])}),n("el-table-column",{attrs:{label:"Free months","min-width":"140px",prop:"time",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("div",[t._v(t._s(t.initTime(a.time)))])]}}])}),n("el-table-column",{attrs:{label:"Expiration Date","min-width":"120px",prop:"expiration",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("div",{class:{"tk-font-color-lightGray":1e3*a.expireIn<(new Date).getTime()&&0!==a.expireIn}},[t._v(" "+t._s(t.initExpiration(a.expireIn))+" ")])]}}])}),n("el-table-column",{attrs:{label:"Link","min-width":"140px",prop:"expiration",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(t.initLink(a.link)))]),t.isNull(a.link)?t._e():n("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.link,expression:"row.link",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticClass:"table-action",staticStyle:{"margin-left":"10px !important"},attrs:{"data-toggle":"tooltip"}},[n("i",{staticClass:"fas fa-copy"})])]}}])})],1),n("modal",{attrs:{show:t.showArchive},on:{"update:show":function(e){t.showArchive=e}}},[n("template",{slot:"header"},[n("h5",{staticClass:"modal-title"},[t._v("Archive Coupon")])]),n("div",{staticClass:"tk-popup-content"},[n("span",[t._v("Are you sure to archive this coupon?")])]),n("template",{slot:"footer"},[n("base-button",{staticClass:"tk-font-color-lightGray tk-border-none",attrs:{type:"secondary"},on:{click:function(e){e.preventDefault(),t.showArchive=!1}}},[t._v("Close")]),n("button-with-loading",{staticStyle:{margin:"0 0 0 1rem"},attrs:{text:"Sure",type:"main",complete:t.isButtonLoadingComplete},on:{start:t.archiveCoupon}})],1)],2),n("modal",{attrs:{show:t.showEnable},on:{"update:show":function(e){t.showEnable=e}}},[n("template",{slot:"header"},[n("h5",{staticClass:"modal-title"},[t._v("Enable Coupon")])]),n("div",{staticClass:"tk-popup-content"},[n("span",[n("div",{staticClass:"form-group card-wrapper tk-px-margin-bottom-px0"},[n("div",{staticClass:"card tk-px-margin-bottom-px16"},[n("div",{staticClass:"form-control",staticStyle:{height:"auto"}},[n("span",{staticClass:"tk-layout-inline-block tk-font-color-black1",staticStyle:{width:"calc(100% - 56px)"}},[t.expirationOpen?[n("span",[t._v("Expiration date")]),n("flat-picker",{staticClass:"form-control form-control-muted tk-bg-color-gray-100 datepicker tk-layout-inline-block tk-px-width-px100 tk-px-margin-left-px10 tk-px-height-px36",attrs:{config:{allowInput:!0}},model:{value:t.expiration,callback:function(e){t.expiration=e},expression:"expiration"}})]:n("span",[t._v("Expiration")])],2),n("base-switch",{staticClass:"mr-1 tk-layout-inline-block",attrs:{"on-text":"On","off-text":"Off",type:"main"},model:{value:t.expirationOpen,callback:function(e){t.expirationOpen=e},expression:"expirationOpen"}})],1)])])])]),n("template",{slot:"footer"},[n("base-button",{staticClass:"tk-font-color-lightGray tk-border-none",attrs:{type:"secondary"},on:{click:function(e){e.preventDefault(),t.showEnable=!1}}},[t._v("Close")]),n("button-with-loading",{staticStyle:{margin:"0 0 0 1rem"},attrs:{text:"Enable",type:"main",complete:t.isButtonLoadingComplete},on:{start:t.enableCoupon}})],1)],2)],1)},i=[],s=(n("82a8"),n("6a61"),n("9ad1")),r=n("2cb5"),l=(n("cc43"),n("2984"),n("855f")),c=n.n(l),p=(n("567e"),n("2b3e")),u=n.n(p),m=(n("93fd"),n("60cf")),d=n.n(m),f=(n("ca6c"),n("2c83")),h=n.n(f),g=(n("31d0"),n("60bf")),b=n.n(g),k=(n("4f55"),n("c944")),v=n.n(k),w=n("5e3a"),x=n("85db"),y=n.n(x),C=n("6ea5"),E={props:{salesManParams:{type:Array,default:function(){return[]}}},components:(a={},Object(r["a"])(a,v.a.name,v.a),Object(r["a"])(a,b.a.name,b.a),Object(r["a"])(a,h.a.name,h.a),Object(r["a"])(a,d.a.name,d.a),Object(r["a"])(a,u.a.name,u.a),Object(r["a"])(a,c.a.name,c.a),Object(r["a"])(a,"flatPicker",y.a),Object(r["a"])(a,"buttonWithLoading",C["default"]),a),data:function(){return{data:[],sales:[],name:"",email:"",showArchive:!1,showEnable:!1,row:null,expiration:"",expirationOpen:!1,isButtonLoadingComplete:!1,accessToken:"",google:google}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t,n.data=n.salesManParams;case 2:case"end":return e.stop()}}),e)})))()},watch:{salesManParams:{handler:function(t,e){this.data=t},deep:!0},expirationOpen:function(t,e){this.expiration=t?this.$tools.formatYYMMDD((new Date).getTime()):""}},methods:{getAccessToken:function(){var t=this,e=t.google,a=n("746c");console.log(t.google,a);var o=new e.auth.JWT(a.client_email,null,a.private_key,["https://www.googleapis.com/auth/firebase"]);o.authorize((function(e,n){e?console.log("Error making request to generate access token:",e):null===n.access_token?console.log("Provided service account does not have permission to generate access tokens"):(t.accessToken=n.access_token,console.log(t.accessToken))}))},initLink:function(t){var e=t.substring(0,15),n=t.substring(t.length-4,t.length);return e+"..."+n},isExpired:function(t){var e=""===t.expireIn||0===t.expireIn?(new Date).getTime():1e3*t.expireIn;return e<(new Date).getTime()},saveName:function(t){this.$tools.isNull(t.name)?t.name=this.name:w["a"].salesManParams.doc(t.id).update({name:t.name}).then((function(){console.log("name 修改成功")}))},saveEmail:function(t){this.$tools.isNull(t.email)?t.email=this.email:this.$tools.isEmail(t.email)?w["a"].salesMan.doc(t.salesManId).set({salesManId:t.salesManId,email:t.email}).then((function(){console.log("email 修改成功")})):(this.$notify({message:"Wrong email, please check it!",type:"error"}),t.email=this.email)},onStats:function(t){alert("Stats")},onArchive:function(t){this.showArchive=!0,this.row=t},archiveCoupon:function(){var t=this,e=parseInt(((new Date).getTime()-864e5)/1e3);w["a"].salesManParams.doc(t.row.id).update({expireIn:e}).then((function(){t.isButtonLoadingComplete=!0,t.data.some((function(n){n.id===t.row.id&&(n.expireIn=e)})),t.row=null,t.showArchive=!1})),t.isButtonLoadingComplete=!1},onEnable:function(t){this.showEnable=!0,this.expirationOpen=!1,this.row=t},enableCoupon:function(){var t=this,e=""===t.expiration?0:parseInt(new Date(t.expiration).getTime()/1e3);w["a"].salesManParams.doc(t.row.id).update({expireIn:e}).then((function(){t.isButtonLoadingComplete=!0,t.expiration="",t.data.some((function(n){n.id===t.row.id&&(n.expireIn=e)})),t.row=null,t.showEnable=!1})),t.isButtonLoadingComplete=!1},onCopySuccess:function(){this.$notify({message:"Copy Success!",type:"success"})},onCopyError:function(){this.$notify({message:"Copy Failed!",type:"error"})},initName:function(t){return this.$tools.isNull(t)?"no name":t},initEmail:function(t){var e=this,n="no email";return e.$tools.isNull(t)?"no email":n},initTime:function(t){return 0==t?"0 month":1==t?"1 month":t+" months"},initExpiration:function(t){if(this.$tools.isNull(t)||0===t)return"2099/1/1";var e=1e3*t;return this.$tools.formatYYMMDD(e)},isNull:function(t){return this.$tools.isNull(t)}}},A=E,B=(n("7922"),n("5d22")),I=Object(B["a"])(A,o,i,!1,null,"c02c196a",null);e["default"]=I.exports}}]);
//# sourceMappingURL=chunk-7718bdb3.78103f57.js.map