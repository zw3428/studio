{"version":3,"sources":["webpack:///./node_modules/_element-ui@2.13.2@element-ui/lib/utils/clickoutside.js","webpack:///./src/tkViews/Pages/DynamicLink.vue?be5f","webpack:///./src/tkViews/Pages/DynamicLink.vue?93c4","webpack:///src/tkViews/Pages/DynamicLink.vue","webpack:///./src/tkViews/Pages/DynamicLink.vue?1fbd","webpack:///./src/tkViews/Pages/DynamicLink.vue?b631"],"names":["exports","__esModule","_vue","_vue2","_interopRequireDefault","_dom","obj","default","nodeList","ctx","startClick","seed","createDocumentHandler","el","binding","vnode","mouseup","arguments","length","undefined","mousedown","context","target","contains","popperElm","expression","methodName","bindingFn","prototype","$isServer","on","document","e","forEach","node","documentHandler","bind","push","id","value","update","unbind","len","i","splice","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","$event","preventDefault","logout","isLoading","_e","allowInput","model","callback","$$v","from","to","class","applyIsEnable","initAnalytics","showModal","staticStyle","range","salesManParams","accessToken","analytic","slot","directives","name","rawName","domProps","composing","isInvalid","validationEmail","email","months","$set","_l","option","index","key","selected","expirationOpen","expiration","isButtonLoadingComplete","addNewLink","staticRenderFns","components","CardLoading","SpreadDynamicLinkInlineActionTable","flatPicker","data","adminUser","dynamicLinksData","options","originSalesManParams","salesMan","links","json","expireIn","nonce","status","desc","salesManId","imageURL","time","watch","newVal","$tools","formatYYMMDD","Date","getTime","initFromTo","indexOf","initRangeFromDay","methods","console","log","self","bus","days","initDayFromRange","parseInt","a","createTime","b","startYMD","day","getDaysByDateString","wkDay","d","getDate","getQuarterStartDate","getAccessToken","func","then","isNull","result","token","getSalesMan","collections","snapshots","empty","item","getLinks","creator","account","getSalesManParams","some","link","initDataByRange","localStorage","clear","$router","isEmail","getDynamicLinks","Promise","db","collection","getSalesManId","component"],"mappings":"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","file":"js/chunk-7b1208b6.ea9b2f3c.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _vue = require('vue');\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _dom = require('element-ui/lib/utils/dom');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar nodeList = [];\nvar ctx = '@@clickoutsideContext';\n\nvar startClick = void 0;\nvar seed = 0;\n\n!_vue2.default.prototype.$isServer && (0, _dom.on)(document, 'mousedown', function (e) {\n  return startClick = e;\n});\n\n!_vue2.default.prototype.$isServer && (0, _dom.on)(document, 'mouseup', function (e) {\n  nodeList.forEach(function (node) {\n    return node[ctx].documentHandler(e, startClick);\n  });\n});\n\nfunction createDocumentHandler(el, binding, vnode) {\n  return function () {\n    var mouseup = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var mousedown = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (!vnode || !vnode.context || !mouseup.target || !mousedown.target || el.contains(mouseup.target) || el.contains(mousedown.target) || el === mouseup.target || vnode.context.popperElm && (vnode.context.popperElm.contains(mouseup.target) || vnode.context.popperElm.contains(mousedown.target))) return;\n\n    if (binding.expression && el[ctx].methodName && vnode.context[el[ctx].methodName]) {\n      vnode.context[el[ctx].methodName]();\n    } else {\n      el[ctx].bindingFn && el[ctx].bindingFn();\n    }\n  };\n}\n\n/**\n * v-clickoutside\n * @desc 点击元素外面才会触发的事件\n * @example\n * ```vue\n * <div v-element-clickoutside=\"handleClose\">\n * ```\n */\nexports.default = {\n  bind: function bind(el, binding, vnode) {\n    nodeList.push(el);\n    var id = seed++;\n    el[ctx] = {\n      id: id,\n      documentHandler: createDocumentHandler(el, binding, vnode),\n      methodName: binding.expression,\n      bindingFn: binding.value\n    };\n  },\n  update: function update(el, binding, vnode) {\n    el[ctx].documentHandler = createDocumentHandler(el, binding, vnode);\n    el[ctx].methodName = binding.expression;\n    el[ctx].bindingFn = binding.value;\n  },\n  unbind: function unbind(el) {\n    var len = nodeList.length;\n\n    for (var i = 0; i < len; i++) {\n      if (nodeList[i][ctx].id === el[ctx].id) {\n        nodeList.splice(i, 1);\n        break;\n      }\n    }\n    delete el[ctx];\n  }\n};","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./DynamicLink.vue?vue&type=style&index=0&id=56d5b45d&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('notifications'),_c('base-header',{staticClass:\"pb-6\"},[_c('div',{staticClass:\"row align-items-center py-4\"},[_c('div',{staticClass:\"col-lg-6 col-7\"},[_c('h6',{staticClass:\"h2 text-white d-inline-block mb-0\"},[_vm._v(\" TuneKey Dynamic Link \")])]),_c('div',{staticClass:\"col-lg-6 col-5 text-right\"},[_c('base-button',{staticClass:\"tk-font-color-main\",attrs:{\"size\":\"sm\",\"type\":\"neutral\"},on:{\"click\":function($event){$event.preventDefault();return _vm.logout($event)}}},[_vm._v(\"Logout\")])],1)])]),_c('div',{staticClass:\"container-fluid mt--6\"},[_c('div',{staticClass:\"card mb-4\"},[(!_vm.isLoading)?_c('div',{staticClass:\"card-header\"},[_c('div',{staticClass:\"row align-items-center\"},[_c('div',{staticClass:\"col-8\"},[_c('span',[_vm._v(\"From\")]),_c('flat-picker',{staticClass:\"form-control form-control-muted tk-bg-color-gray-100 datepicker tk-layout-inline-block tk-px-width-px100 tk-px-margin-left-px8 tk-px-height-px36\",attrs:{\"config\":{ allowInput: true }},model:{value:(_vm.from),callback:function ($$v) {_vm.from=$$v},expression:\"from\"}}),_c('span',[_vm._v(\" - To\")]),_c('flat-picker',{staticClass:\"form-control form-control-muted tk-bg-color-gray-100 datepicker tk-layout-inline-block tk-px-width-px100 tk-px-margin-left-px8 tk-px-height-px36\",attrs:{\"config\":{ allowInput: true }},model:{value:(_vm.to),callback:function ($$v) {_vm.to=$$v},expression:\"to\"}}),_c('span',{staticClass:\"btn btn-sm btn-neutral tk-px-margin-left-px16\",class:{\n                'tk-bg-color-gray-400 tk-border-color-gray-400 tk-font-color-white': !_vm.applyIsEnable,\n                'tk-font-color-main': _vm.applyIsEnable,\n              },on:{\"click\":function($event){$event.preventDefault();return _vm.initAnalytics($event)}}},[_vm._v(\"Apply\")])],1),_c('div',{staticClass:\"col-4 text-right\"},[_c('span',{staticClass:\"btn btn-sm btn-neutral tk-font-color-main\",on:{\"click\":function($event){$event.preventDefault();_vm.showModal = true}}},[_vm._v(\"New Link\")])]),_c('div',{staticClass:\"tk-dynamic-range-filter\",staticStyle:{\"margin-top\":\"10px\",\"font-size\":\"14px\"}},[_c('span',{staticClass:\"tk-px-margin-left-px16 tk-cursor-pointer\",class:{\n                'tk-font-color-main tk-font-weight-bold': _vm.range === 0,\n              },staticStyle:{\"color\":\"#8898aa\"},on:{\"click\":function($event){$event.preventDefault();_vm.range = 0}}},[_vm._v(\"Total\")]),_c('span',{staticClass:\"tk-px-margin-left-px16 tk-cursor-pointer\",class:{\n                'tk-font-color-main tk-font-weight-bold': _vm.range === 1,\n              },staticStyle:{\"color\":\"#8898aa\"},on:{\"click\":function($event){$event.preventDefault();_vm.range = 1}}},[_vm._v(\"Last 7 days\")]),_c('span',{staticClass:\"tk-px-margin-left-px16 tk-cursor-pointer\",class:{\n                'tk-font-color-main tk-font-weight-bold': _vm.range === 2,\n              },staticStyle:{\"color\":\"#8898aa\"},on:{\"click\":function($event){$event.preventDefault();_vm.range = 2}}},[_vm._v(\"Last 30 days\")]),_c('span',{staticClass:\"tk-px-margin-left-px16 tk-cursor-pointer\",class:{\n                'tk-font-color-main tk-font-weight-bold': _vm.range === 3,\n              },staticStyle:{\"color\":\"#8898aa\"},on:{\"click\":function($event){$event.preventDefault();_vm.range = 3}}},[_vm._v(\"This week\")]),_c('span',{staticClass:\"tk-px-margin-left-px16 tk-cursor-pointer\",class:{\n                'tk-font-color-main tk-font-weight-bold': _vm.range === 4,\n              },staticStyle:{\"color\":\"#8898aa\"},on:{\"click\":function($event){$event.preventDefault();_vm.range = 4}}},[_vm._v(\"This month\")]),_c('span',{staticClass:\"tk-px-margin-left-px16 tk-cursor-pointer\",class:{\n                'tk-font-color-main tk-font-weight-bold': _vm.range === 5,\n              },staticStyle:{\"color\":\"#8898aa\"},on:{\"click\":function($event){$event.preventDefault();_vm.range = 5}}},[_vm._v(\"This quater\")]),_c('span',{staticClass:\"tk-px-margin-left-px16 tk-cursor-pointer\",class:{\n                'tk-font-color-main tk-font-weight-bold': _vm.range === 6,\n              },staticStyle:{\"color\":\"#8898aa\"},on:{\"click\":function($event){$event.preventDefault();_vm.range = 6}}},[_vm._v(\"This year\")])])])]):_vm._e(),_c('div',{staticClass:\"card-body\",staticStyle:{\"height\":\"calc(100vh - 220px)\"}},[(_vm.isLoading)?_c('card-loading'):[_c('spread-dynamic-link-inline-action-table',{attrs:{\"salesManParams\":_vm.salesManParams,\"accessToken\":_vm.accessToken,\"from\":_vm.from,\"to\":_vm.to},on:{\"analytic\":_vm.analytic}})]],2)])]),_c('modal',{attrs:{\"show\":_vm.showModal},on:{\"update:show\":function($event){_vm.showModal=$event}}},[_c('template',{slot:\"header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"exampleModalLabel\"}},[_vm._v(\"New Link\")])]),_c('div',{staticClass:\"tk-popup-content\",staticStyle:{\"max-height\":\"60vh\",\"overflow-y\":\"auto\"}},[_c('div',[_c('span',[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"form-control-label\"},[_vm._v(\"Name\")]),_c('div',{staticClass:\"has-label\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-control form-control-muted tk-border-bottom tk-font-color-black1\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})])])]),_c('div',[_c('span',[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"form-control-label\"},[_vm._v(\"Email\")]),_c('div',{staticClass:\"has-label\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"form-control form-control-muted tk-border-bottom tk-font-color-black1\",class:{ 'is-invalid': _vm.isInvalid },attrs:{\"type\":\"email\"},domProps:{\"value\":(_vm.email)},on:{\"blur\":function($event){$event.preventDefault();return _vm.validationEmail($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isInvalid),expression:\"isInvalid\"}],staticClass:\"invalid-feedback\",staticStyle:{\"display\":\"block\"}},[_vm._v(\" The email is not correct. \")])])])]),_c('span',[_c('div',{staticClass:\"form-group tk-px-margin-bottom-px0\"},[_c('label',{staticClass:\"form-control-label\"},[_vm._v(\"Free months\")]),_c('div',{staticClass:\"has-label\"},[_c('el-select',{staticClass:\"tk-select-border-none tk-border-bottom tk-select-bg-mute\",model:{value:(_vm.months.selected),callback:function ($$v) {_vm.$set(_vm.months, \"selected\", $$v)},expression:\"months.selected\"}},_vm._l((_vm.months.options),function(option,index){return _c('el-option',{key:index,attrs:{\"label\":option > 0 ? option + '-MONTH-FREE' : 'FREE DOWNLOAD',\"value\":option}})}),1)],1)])]),_c('img',{staticStyle:{\"width\":\"calc(100% - 4rem)\",\"display\":\"block\",\"margin\":\"0 auto\"},attrs:{\"src\":'/img/coupon/coupon-' + _vm.months.selected + '.png'}}),_c('span',[_c('div',{staticClass:\"form-group card-wrapper tk-px-margin-bottom-px0\"},[_c('div',{staticClass:\"card tk-px-margin-bottom-px16\"},[_c('div',{staticClass:\"form-control\",staticStyle:{\"height\":\"auto\"}},[_c('span',{staticClass:\"tk-layout-inline-block tk-font-color-black1\",staticStyle:{\"width\":\"calc(100% - 56px)\"}},[(!_vm.expirationOpen)?_c('span',[_vm._v(\"Expiration\")]):[_c('span',[_vm._v(\"Expiration date\")]),_c('flat-picker',{staticClass:\"form-control form-control-muted tk-bg-color-gray-100 datepicker tk-layout-inline-block tk-px-width-px100 tk-px-margin-left-px10 tk-px-height-px36\",attrs:{\"config\":{ allowInput: true }},model:{value:(_vm.expiration),callback:function ($$v) {_vm.expiration=$$v},expression:\"expiration\"}})]],2),_c('base-switch',{staticClass:\"mr-1 tk-layout-inline-block\",attrs:{\"on-text\":\"On\",\"off-text\":\"Off\",\"type\":\"main\"},model:{value:(_vm.expirationOpen),callback:function ($$v) {_vm.expirationOpen=$$v},expression:\"expirationOpen\"}})],1)])])])])]),_c('template',{slot:\"footer\"},[_c('base-button',{staticClass:\"tk-font-color-lightGray tk-border-none\",attrs:{\"type\":\"secondary\"},on:{\"click\":function($event){$event.preventDefault();_vm.showModal = false}}},[_vm._v(\"Close\")]),_c('button-with-loading',{staticStyle:{\"margin\":\"0 0 0 1rem\"},attrs:{\"text\":\"Create\",\"type\":'main',\"complete\":_vm.isButtonLoadingComplete},on:{\"start\":_vm.addNewLink}})],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--  v-if=\"adminUser !== null\" -->\n  <div>\n    <!-- Header -->\n    <notifications></notifications>\n    <base-header class=\"pb-6\">\n      <div class=\"row align-items-center py-4\">\n        <div class=\"col-lg-6 col-7\">\n          <h6 class=\"h2 text-white d-inline-block mb-0\">\n            TuneKey Dynamic Link\n          </h6>\n        </div>\n        <div class=\"col-lg-6 col-5 text-right\">\n          <base-button\n            size=\"sm\"\n            type=\"neutral\"\n            @click.prevent=\"logout\"\n            class=\"tk-font-color-main\"\n            >Logout</base-button\n          >\n        </div>\n      </div>\n    </base-header>\n\n    <div class=\"container-fluid mt--6\">\n      <div class=\"card mb-4\">\n        <div class=\"card-header\" v-if=\"!isLoading\">\n          <div class=\"row align-items-center\">\n            <div class=\"col-8\">\n              <!-- <h5 class=\"h3 mb-0\">Links</h5> -->\n              <span>From</span>\n              <flat-picker\n                :config=\"{ allowInput: true }\"\n                class=\"form-control form-control-muted tk-bg-color-gray-100 datepicker tk-layout-inline-block tk-px-width-px100 tk-px-margin-left-px8 tk-px-height-px36\"\n                v-model=\"from\"\n              >\n              </flat-picker>\n              <span> - To</span>\n              <flat-picker\n                :config=\"{ allowInput: true }\"\n                class=\"form-control form-control-muted tk-bg-color-gray-100 datepicker tk-layout-inline-block tk-px-width-px100 tk-px-margin-left-px8 tk-px-height-px36\"\n                v-model=\"to\"\n              >\n              </flat-picker>\n              <span\n                class=\"btn btn-sm btn-neutral tk-px-margin-left-px16\"\n                :class=\"{\n                  'tk-bg-color-gray-400 tk-border-color-gray-400 tk-font-color-white': !applyIsEnable,\n                  'tk-font-color-main': applyIsEnable,\n                }\"\n                @click.prevent=\"initAnalytics\"\n                >Apply</span\n              >\n            </div>\n            <div class=\"col-4 text-right\">\n              <span\n                class=\"btn btn-sm btn-neutral tk-font-color-main\"\n                @click.prevent=\"showModal = true\"\n                >New Link</span\n              >\n            </div>\n\n            <div style=\"margin-top: 10px; font-size: 14px\" class=\"tk-dynamic-range-filter\">\n              <span\n                class=\"tk-px-margin-left-px16 tk-cursor-pointer\"\n                style=\"color: #8898aa\"\n                :class=\"{\n                  'tk-font-color-main tk-font-weight-bold': range === 0,\n                }\"\n                @click.prevent=\"range = 0\"\n                >Total</span\n              >\n              <span\n                class=\"tk-px-margin-left-px16 tk-cursor-pointer\"\n                style=\"color: #8898aa\"\n                :class=\"{\n                  'tk-font-color-main tk-font-weight-bold': range === 1,\n                }\"\n                @click.prevent=\"range = 1\"\n                >Last 7 days</span\n              >\n              <span\n                class=\"tk-px-margin-left-px16 tk-cursor-pointer\"\n                style=\"color: #8898aa\"\n                :class=\"{\n                  'tk-font-color-main tk-font-weight-bold': range === 2,\n                }\"\n                @click.prevent=\"range = 2\"\n                >Last 30 days</span\n              >\n              <span\n                class=\"tk-px-margin-left-px16 tk-cursor-pointer\"\n                style=\"color: #8898aa\"\n                :class=\"{\n                  'tk-font-color-main tk-font-weight-bold': range === 3,\n                }\"\n                @click.prevent=\"range = 3\"\n                >This week</span\n              >\n              <span\n                class=\"tk-px-margin-left-px16 tk-cursor-pointer\"\n                style=\"color: #8898aa\"\n                :class=\"{\n                  'tk-font-color-main tk-font-weight-bold': range === 4,\n                }\"\n                @click.prevent=\"range = 4\"\n                >This month</span\n              >\n              <span\n                class=\"tk-px-margin-left-px16 tk-cursor-pointer\"\n                style=\"color: #8898aa\"\n                :class=\"{\n                  'tk-font-color-main tk-font-weight-bold': range === 5,\n                }\"\n                @click.prevent=\"range = 5\"\n                >This quater</span\n              >\n              <span\n                class=\"tk-px-margin-left-px16 tk-cursor-pointer\"\n                style=\"color: #8898aa\"\n                :class=\"{\n                  'tk-font-color-main tk-font-weight-bold': range === 6,\n                }\"\n                @click.prevent=\"range = 6\"\n                >This year</span\n              >\n            </div>\n          </div>\n        </div>\n        <div class=\"card-body\" style=\"height: calc(100vh - 220px)\">\n          <card-loading v-if=\"isLoading\"></card-loading>\n          <template v-else>\n            <spread-dynamic-link-inline-action-table\n              :salesManParams=\"salesManParams\"\n              :accessToken=\"accessToken\"\n              :from=\"from\"\n              :to=\"to\"\n              @analytic=\"analytic\"\n            ></spread-dynamic-link-inline-action-table>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <modal :show.sync=\"showModal\">\n      <template slot=\"header\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">New Link</h5>\n      </template>\n      <div class=\"tk-popup-content\" style=\"max-height: 60vh; overflow-y: auto\">\n        <!-- Name |  email(optional)  |  0-6 months for free | expiration date -->\n        <div>\n          <!-- name -->\n          <span>\n            <div class=\"form-group\">\n              <label class=\"form-control-label\">Name</label>\n              <div class=\"has-label\">\n                <input\n                  type=\"text\"\n                  class=\"form-control form-control-muted tk-border-bottom tk-font-color-black1\"\n                  v-model=\"name\"\n                />\n              </div>\n            </div>\n          </span>\n\n          <!-- email -->\n          <div>\n            <span>\n              <div class=\"form-group\">\n                <label class=\"form-control-label\">Email</label>\n                <div class=\"has-label\">\n                  <input\n                    type=\"email\"\n                    class=\"form-control form-control-muted tk-border-bottom tk-font-color-black1\"\n                    :class=\"{ 'is-invalid': isInvalid }\"\n                    @blur.prevent=\"validationEmail\"\n                    v-model=\"email\"\n                  />\n                </div>\n                <div\n                  class=\"invalid-feedback\"\n                  style=\"display: block\"\n                  v-show=\"isInvalid\"\n                >\n                  The email is not correct.\n                </div>\n              </div>\n            </span>\n          </div>\n\n          <!-- months -->\n          <span>\n            <div class=\"form-group tk-px-margin-bottom-px0\">\n              <label class=\"form-control-label\">Free months</label>\n              <div class=\"has-label\">\n                <el-select\n                  v-model=\"months.selected\"\n                  class=\"tk-select-border-none tk-border-bottom tk-select-bg-mute\"\n                >\n                  <el-option\n                    v-for=\"(option, index) in months.options\"\n                    :key=\"index\"\n                    :label=\"\n                      option > 0 ? option + '-MONTH-FREE' : 'FREE DOWNLOAD'\n                    \"\n                    :value=\"option\"\n                  >\n                  </el-option>\n                </el-select>\n              </div>\n            </div>\n          </span>\n          <img\n            :src=\"'/img/coupon/coupon-' + months.selected + '.png'\"\n            style=\"width: calc(100% - 4rem); display: block; margin: 0 auto\"\n          />\n\n          <!-- expiration -->\n          <span>\n            <div class=\"form-group card-wrapper tk-px-margin-bottom-px0\">\n              <div class=\"card tk-px-margin-bottom-px16\">\n                <div class=\"form-control\" style=\"height: auto\">\n                  <span\n                    class=\"tk-layout-inline-block tk-font-color-black1\"\n                    style=\"width: calc(100% - 56px)\"\n                  >\n                    <span v-if=\"!expirationOpen\">Expiration</span>\n                    <template v-else>\n                      <span>Expiration date</span>\n                      <flat-picker\n                        :config=\"{ allowInput: true }\"\n                        class=\"form-control form-control-muted tk-bg-color-gray-100 datepicker tk-layout-inline-block tk-px-width-px100 tk-px-margin-left-px10 tk-px-height-px36\"\n                        v-model=\"expiration\"\n                      >\n                      </flat-picker>\n                    </template>\n                  </span>\n                  <base-switch\n                    class=\"mr-1 tk-layout-inline-block\"\n                    v-model=\"expirationOpen\"\n                    on-text=\"On\"\n                    off-text=\"Off\"\n                    type=\"main\"\n                  ></base-switch>\n                </div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <template slot=\"footer\">\n        <base-button\n          type=\"secondary\"\n          @click.prevent=\"showModal = false\"\n          class=\"tk-font-color-lightGray tk-border-none\"\n          >Close</base-button\n        >\n        <button-with-loading\n          style=\"margin: 0 0 0 1rem\"\n          text=\"Create\"\n          @start=\"addNewLink\"\n          :type=\"'main'\"\n          :complete=\"isButtonLoadingComplete\"\n        ></button-with-loading>\n        <!-- <base-button\n          type=\"primary\"\n          @click.prevent=\"addNewLink\"\n          class=\"tk-font-color-white tk-bg-color-main tk-border-none\"\n          >Create</base-button\n        > -->\n      </template>\n    </modal>\n  </div>\n</template>\n\n<script>\nimport \"flatpickr/dist/flatpickr.css\";\nimport bus from \"@/bus.js\";\nimport { Select, Option } from \"element-ui\";\nimport collections from \"@/services/collections\";\nexport default {\n  components: {\n    CardLoading: () => import(\"@/tkViews/components/layout/CardLoading\"),\n    SpreadDynamicLinkInlineActionTable: () =>\n      import(\"./RegularTables/SpreadDynamicLinkInlineActionTable\"),\n    flatPicker: () => import(\"vue-flatpickr-component\"),\n    [Select.name]: Select,\n    [Option.name]: Option,\n    buttonWithLoading: () =>\n      import(\"@/tkViews/components/layout/ButtonWithLoading\"),\n  },\n  data() {\n    return {\n      from: \"\",\n      to: \"\",\n      range: 1,\n      // 0: total, 1: 7d, 2: 30d, 3: wk, 4: mo, 5:qr, 6: yr\n      adminUser: null,\n      isLoading: true,\n      applyIsEnable: false,\n      dynamicLinksData: [],\n      showModal: false,\n      isInvalid: false,\n      expirationOpen: false,\n      isButtonLoadingComplete: false,\n      expiration: \"\",\n      email: \"\",\n      name: \"\",\n      months: {\n        selected: 3,\n        options: [0, 1, 2, 3, 4, 5, 6],\n      },\n      originSalesManParams: [],\n      salesManParams: [],\n      salesMan: [],\n      links: [],\n      accessToken: \"\",\n      json: {\n        expireIn: 1614556800,\n        nonce: \"jAHkKLOg2kGvnqUv\",\n        status: 1,\n        desc: \"You are currently PRO now, enjoy TuneKey with unlimited access!\",\n        salesManId: \"FHSpoJJKF\",\n        imageURL:\n          \"https://firebasestorage.googleapis.com/v0/b/tunekey-2019.appspot.com/o/images%2Fothers%2Fcoupon.png?alt=media&token=fd25342c-2377-48df-8cd1-3e2c225d6d9a\",\n        id: \"JPSI82IK2\",\n        time: 3,\n      },\n    };\n  },\n  async created() {\n    let self = this;\n    let user = localStorage.getItem(\"adminUser\");\n    let info = await collections.config.doc(\"salesAccount\").get();\n    let sales = info.data().sales;\n\n    self.initFromTo();\n\n    if (self.$tools.isNull(user)) {\n      self.$router.push({ name: \"Login\" });\n    } else {\n      self.adminUser = JSON.parse(user);\n\n      for (let i = 0; i < sales.length; i++) {\n        if (\n          sales[i].account === self.adminUser.account &&\n          sales[i].password === self.adminUser.password\n        ) {\n          self.getAccessToken();\n          break;\n        } else {\n          if (i === sales.length - 1) {\n            self.$router.push({ name: \"Login\" });\n          }\n        }\n      }\n    }\n  },\n  watch: {\n    expirationOpen(newVal, oldVal) {\n      if (newVal) {\n        this.expiration = this.$tools.formatYYMMDD(new Date().getTime());\n      } else {\n        this.expiration = \"\";\n      }\n    },\n    range(newVal, oldVal) {\n      // let d = new Date(timestamp);\n      // d.setDate(d.getDate() + 1);\n      // d.setHours(0, 0, 0, 0);\n      if (newVal > -1) {\n        this.initFromTo();\n      }\n    },\n    from(newVal, oldval) {\n      this.applyIsEnable = true;\n      if (newVal.indexOf(\"-\") > -1) {\n        let from = this.$tools.formatYYMMDD(new Date(newVal).getTime());\n        if (new Date(from).getTime() > new Date().getTime()) {\n          from = this.$tools.formatYYMMDD(new Date().getTime());\n        }\n        this.initRangeFromDay();\n        this.from = from;\n      }\n    },\n    to(newVal, oldval) {\n      this.applyIsEnable = true;\n      if (newVal.indexOf(\"-\") > -1) {\n        let to = this.$tools.formatYYMMDD(new Date(newVal).getTime());\n        if (new Date(to).getTime() > new Date().getTime()) {\n          to = this.$tools.formatYYMMDD(new Date().getTime());\n        }\n        this.initRangeFromDay();\n        this.to = to;\n      }\n    },\n  },\n  methods: {\n    analytic() {\n      this.isLoading = false;\n      console.log(\"分析完成\");\n    },\n    initAnalytics() {\n      let self = this;\n      if (self.applyIsEnable) {\n        self.applyIsEnable = false;\n        bus.$emit(\"analytic\");\n      }\n    },\n    initRangeFromDay() {\n      let days = this.$tools.getDaysByDateString(this.from, this.to);\n      if (days <= 7) {\n        if (\n          this.to === this.$tools.formatYYMMDD(new Date().getTime()) &&\n          this.$tools.datesIsSameWeek(\n            new Date(this.from).getTime(),\n            new Date(this.to).getTime()\n          )\n        ) {\n          this.range = 3;\n        } else {\n          this.range = -1;\n        }\n      }\n    },\n    initDayFromRange() {\n      let self = this;\n      // 0: total, 1: 7d, 2: 30d, 3: wk, 4: mo, 5:qr, 6: yr\n      let day = 0;\n      let d = new Date();\n      let wkDay = d.getDay();\n      let nowYMD = self.$tools.formatYYMMDD(d.getTime());\n      let startYMD;\n      switch (self.range) {\n        case 0:\n          let links = self.links.sort((a, b) => {\n            return parseInt(a.createTime) - parseInt(b.createTime);\n          });\n          startYMD = self.$tools.formatYYMMDD(links[0].createTime * 1000);\n          day = self.$tools.getDaysByDateString(startYMD, self.to) - 1;\n          break;\n        case 1:\n          day = 7;\n          break;\n        case 2:\n          day = 30;\n          break;\n        case 3:\n          day = wkDay === 0 ? 6 : wkDay - 1;\n          break;\n        case 4:\n          day = d.getDate() - 1;\n          break;\n        case 5:\n          startYMD = self.$tools.getQuarterStartDate();\n          console.log(\"quarter start: \", startYMD);\n          day = parseInt(\n            (new Date(nowYMD).getTime() - new Date(startYMD).getTime()) /\n              (24 * 60 * 60 * 1000)\n          );\n          break;\n        case 6:\n          day = parseInt(\n            (new Date(nowYMD).getTime() -\n              new Date(d.getFullYear() + \"/1/1\").getTime()) /\n              (24 * 60 * 60 * 1000)\n          );\n          break;\n      }\n      return day;\n    },\n    async initFromTo() {\n      let self = this;\n      let day = await self.initDayFromRange();\n      let dTo = new Date(),\n        dFrom = new Date();\n      dFrom.setDate(dFrom.getDate() - day);\n      self.to = self.$tools.formatYYMMDD(dTo.getTime());\n      self.from = self.$tools.formatYYMMDD(dFrom.getTime());\n    },\n    getAccessToken() {\n      let self = this;\n      let func = self.$firebase.functions().httpsCallable(\"getAccessToken\");\n      func().then((result) => {\n        if (!self.$tools.isNull(result.data.data)) {\n          self.accessToken = result.data.data.token;\n        }\n        self.getSalesMan();\n      });\n    },\n    getSalesMan() {\n      let self = this;\n      collections.salesMan.onSnapshot((snapshots) => {\n        if (snapshots.empty) {\n          self.salesMan = [];\n        } else {\n          let data = [];\n\n          snapshots.forEach((item) => {\n            data.push(item.data());\n          });\n\n          self.salesMan = data;\n        }\n        console.log(\"listen salesMan: \", self.salesMan);\n        self.getLinks();\n      });\n    },\n    getLinks() {\n      let self = this;\n      // collections.salesManLinks.onSnapshot((snapshots) => {\n      collections.salesManLinks.get().then((snapshots) => {\n        if (snapshots.empty) {\n          self.links = [];\n        } else {\n          let data = [];\n\n          snapshots.forEach((item) => {\n            if (item.data().creator === self.adminUser.account) {\n              data.push(item.data());\n            }\n          });\n\n          self.links = data;\n        }\n        self.getSalesManParams();\n        console.log(\"links: \", self.links);\n      });\n    },\n    getSalesManParams() {\n      let self = this;\n      // collections.salesManParams.onSnapshot((snapshots) => {\n      collections.salesManParams.get().then((snapshots) => {\n        if (snapshots.empty) {\n          self.salesManParams = [];\n        } else {\n          let data = [];\n\n          snapshots.forEach((item) => {\n            let obj = self.$tools.objKeySort(item.data());\n            obj.email = \"\";\n            self.salesMan.some((i) => {\n              if (i.salesManId == obj.salesManId) {\n                obj.email = i.email;\n              }\n            });\n            self.links.some((i) => {\n              if (i.id == obj.id) {\n                obj.link = i.link;\n                obj.createTime = i.createTime;\n                data.push(obj);\n              }\n            });\n          });\n\n          self.salesManParams = data;\n        }\n        console.log(\"data: \", self.salesManParams);\n        self.originSalesManParams = self.salesManParams;\n        self.isLoading = false;\n        self.initDataByRange();\n      });\n    },\n    initDataByRange() {\n      let self = this;\n    },\n    logout() {\n      let self = this;\n      // bus.$emit(\"showLoading\");\n      localStorage.clear();\n      self.$router.push({ name: \"AdministrationLogin\" });\n      // bus.$emit(\"hideLoading\");\n    },\n    async addNewLink() {\n      let self = this;\n\n      // salesManParams\n      let dynamic = {\n        expireIn: self.$tools.isNull(self.expiration)\n          ? 0\n          : parseInt(new Date(self.expiration).getTime() / 1000),\n        nonce: self.$tools.getRandomString(16), // 16\n        status: 1, // active: 1, archive: 0\n        desc: \"You are currently PRO now, enjoy TuneKey with unlimited access!\",\n        salesManId: self.$tools.getRandomString(9), // 9\n        imageURL:\n          \"https://firebasestorage.googleapis.com/v0/b/tunekey-2019.appspot.com/o/images%2Fothers%2Fcoupon-\" +\n          self.months.selected +\n          \".png?alt=media&token=fd25342c-2377-48df-8cd1-3e2c225d6d9a\",\n        id: self.$tools.getRandomString(9), // 9\n        time: self.months.selected,\n      };\n\n      // 排序\n      dynamic = this.$tools.objKeySort(dynamic);\n\n      // 拼接\n      let signature = this.$tools.getJsonKeyValueStr(dynamic);\n      signature = signature.substring(0, signature.length - 1);\n\n      // md5\n      let md5 = String(this.$md5(signature)).toUpperCase();\n\n      // 生成短链接\n      await self.$axios\n        .post(\n          \"https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=AIzaSyBdUyJmAAbAGEWq0hsbcidOUiaQU1aLxkM\",\n          {\n            // longDynamicLink:\n            //   \"https://tunekey.app/link/?link=https://tunekey.app/redirect/i?u=\" +\n            //   dynamic.salesManId +\n            //   \"&c=\" +\n            //   dynamic.id +\n            //   \"&s=\" +\n            //   md5,\n            suffix: {\n              option: \"SHORT\",\n            },\n            dynamicLinkInfo: {\n              domainUriPrefix: \"https://tunekey.app/link\",\n              link:\n                \"https://tunekey.app/redirect/i?u=\" +\n                dynamic.salesManId +\n                \"&c=\" +\n                dynamic.id +\n                \"&s=\" +\n                md5 +\n                \"&t=\" +\n                new Date().getTime(),\n              // link: \"https://tunekey.app\",\n              androidInfo: {\n                androidPackageName: \"com.spelist.tunekey\",\n                androidFallbackLink: \"https://tunekey.app/download\",\n                androidMinPackageVersionCode: \"1\",\n              },\n              iosInfo: {\n                iosBundleId: \"com.spelist.tunekey\",\n                iosIpadBundleId: \"tunekey\",\n                iosAppStoreId: \"1479006791\",\n              },\n              navigationInfo: {\n                enableForcedRedirect: false,\n              },\n              socialMetaTagInfo: {\n                socialTitle: \"\",\n                socialDescription: \"\",\n                socialImageLink: dynamic.imageURL,\n              },\n            },\n          }\n        )\n        .then(async function (res) {\n          // console.log(res);\n\n          if (res.data.shortLink) {\n            // salesManParam\n            let param = dynamic;\n            param.name = self.name;\n            await collections.salesManParams.doc(dynamic.id).set(param);\n\n            // salesManLinks\n            await collections.salesManLinks.doc(dynamic.id).set({\n              link: res.data.shortLink,\n              id: dynamic.id,\n              createTime: parseInt(new Date().getTime() / 1000),\n              creator: self.adminUser.account,\n            });\n\n            // salesMan\n            await collections.salesMan.doc(dynamic.salesManId).set({\n              salesManId: dynamic.salesManId,\n              email: self.email,\n            });\n\n            // signUpViaLinkCount\n            await collections.signUpViaLinkCount.doc(dynamic.id).set({\n              count: 0,\n              id: dynamic.id,\n            });\n\n            self.isButtonLoadingComplete = true;\n            self.showModal = false;\n\n            self.$notify({\n              message: \"Create Success!\",\n              type: \"success\",\n            });\n          }\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n\n      self.name = \"\";\n      self.email = \"\";\n      self.isButtonLoadingComplete = false;\n    },\n    validationEmail() {\n      let self = this;\n\n      if (self.$tools.isNull(self.email)) {\n        self.isInvalid = false;\n      } else {\n        self.isInvalid = !self.$tools.isEmail(self.email);\n      }\n    },\n    getDynamicLinks(salesManId) {\n      return new Promise((resolve, reject) => {\n        db.collection(\"sales_man_params\")\n          .where(\"salesManId\", \"==\", salesManId)\n          .get()\n          .then((snapshot) => {\n            if (!snapshot.empty) {\n              let data = [];\n              snapshot.forEach((doc) => {\n                data.push(doc.data());\n              });\n              resolve(data);\n            } else {\n              resolve([]);\n            }\n          })\n          .catch((err) => {\n            console.error(\"Get [sales_man_params] failed, error: \", err);\n            resolve([]);\n          });\n      });\n    },\n    getSalesManId(userId) {\n      return new Promise((resolve, reject) => {\n        db.collection(\"sales_man_record\")\n          .where(\"userId\", \"==\", userId)\n          .get()\n          .then((snapshot) => {\n            if (!snapshot.empty) {\n              let data = [];\n              snapshot.forEach((doc) => {\n                data.push(doc.data());\n              });\n              resolve(data[data.length - 1]);\n            } else {\n              resolve(null);\n            }\n          })\n          .catch((err) => {\n            console.error(\"Get [sales_man_record] failed, error: \", err);\n            resolve(null);\n          });\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.tk-popup-content::-webkit-scrollbar {\n  display: none;\n}\n.tk-dynamic-range-filter > span:hover {\n  text-decoration: underline;\n}\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./DynamicLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./DynamicLink.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DynamicLink.vue?vue&type=template&id=56d5b45d&scoped=true&\"\nimport script from \"./DynamicLink.vue?vue&type=script&lang=js&\"\nexport * from \"./DynamicLink.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DynamicLink.vue?vue&type=style&index=0&id=56d5b45d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56d5b45d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}