(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e235f36"],{"5ff1":function(e,t,n){"use strict";n("7fd5")},"7fd5":function(e,t,n){},f618:function(e,t,n){"use strict";n.r(t);var a,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tk-console"},[n("base-header",{staticClass:"pb-6"},[n("div",{staticClass:"row align-items-center py-4"},[n("div",{staticClass:"col-lg-6 col-7"},[n("h6",{staticClass:"h2 text-white d-inline-block mb-0"},[e._v("Administration")])]),n("div",{staticClass:"col-lg-6 col-5 text-right"},[n("base-button",{staticClass:"text-main",attrs:{size:"sm",type:"white"},on:{click:function(t){t.stopPropagation(),e.showAddAccount=!0}}},[e._v("Create")]),n("base-button",{staticClass:"text-main",attrs:{size:"sm",type:"white"},on:{click:function(t){t.stopPropagation(),e.showAccountType=!0}}},[e._v("Account Type")])],1)])]),n("div",{staticClass:"container-fluid mt--6"},[n("div",{staticClass:"card-wrapper"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("el-table",{staticClass:"table-responsive align-items-center table-flush",attrs:{"header-row-class-name":"thead-light",data:e.accounts}},[n("el-table-column",{attrs:{label:"Name",prop:"name"}}),n("el-table-column",{attrs:{label:"Email",prop:"email"}}),n("el-table-column",{attrs:{label:"Password",prop:"password"}}),n("el-table-column",{attrs:{label:"Sign up date",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(e.formatMMDDYY(a.createTime)))])]}}])}),n("el-table-column",{attrs:{label:"Account type",prop:"accountType"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(e.formatAccountType(a.typeId)))])]}}])}),n("el-table-column",{attrs:{label:"Logs"}},[n("span",[e._v("0")])]),n("el-table-column",{attrs:{label:"Permission"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-dropdown",{staticClass:"dropdown",staticStyle:{width:"100%"},attrs:{trigger:"click"}},[n("div",[e._v(e._s(e.getPermissionsByTypeId(a.typeId).length))]),n("el-dropdown-menu",{staticClass:"dropdown-menu dropdown-menu-arrow show",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.accountType,(function(t){return n("el-dropdown-item",{key:t.id},[n("div",{on:{click:function(n){return e.changeAccountType(a,t)}}},[e._v(" "+e._s(t.name)+" ("+e._s(e.getPermissionsByTypeId(t.id).length)+") ")])])})),1)],1)]}}])}),n("el-table-column",{attrs:{width:"54"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",{staticClass:"tk-console-table-fa-btn"},[n("i",{staticClass:"fas fa-minus-circle tk-font-color-lightGray tk-px-margin-right-px20",on:{click:function(t){return t.stopPropagation(),e.removeAccount(a)}}})])]}}])})],1)],1)])])]),n("modal",{attrs:{show:e.showAccountType,id:"accountType"},on:{"update:show":function(t){e.showAccountType=t}}},[n("template",{slot:"header"},[n("h5",{staticClass:"modal-title"},[e._v("Account type")])]),n("div",{staticClass:"tk-popup-content"},[n("div",{staticStyle:{"margin-bottom":"20px","text-align":"center"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"New account type"},model:{value:e.newAccountType,callback:function(t){e.newAccountType=t},expression:"newAccountType"}}),n("span",{staticClass:"tk-font-color-main tk-px-margin-left-px20 tk-cursor-pointer",on:{click:e.addNewAccountType}},[e._v("Add")])],1),n("el-table",{staticClass:"table-responsive align-items-center table-flush",attrs:{"header-row-class-name":"thead-light",data:e.accountType}},[n("el-table-column",{attrs:{label:"Account Type",prop:"name",width:"130"}}),n("el-table-column",{attrs:{label:"Shake to Report",prop:"shakeToReport",width:"88"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("span",[t.permissions.indexOf("5")>-1?n("i",{staticClass:"fas fa-check-square tk-font-color-main",on:{click:function(e){e.stopPropagation(),t.permissions.splice(t.permissions.indexOf("5"),1)}}}):n("i",{staticClass:"far fa-square tk-font-color-lightGray",on:{click:function(e){return e.stopPropagation(),t.permissions.push("5")}}})])]}}])}),n("el-table-column",{attrs:{label:"Screen Shots",prop:"screenShots",width:"72"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("span",[t.permissions.indexOf("4")>-1?n("i",{staticClass:"fas fa-check-square tk-font-color-main",on:{click:function(e){e.stopPropagation(),t.permissions.splice(t.permissions.indexOf("4"),1)}}}):n("i",{staticClass:"far fa-square tk-font-color-lightGray",on:{click:function(e){return e.stopPropagation(),t.permissions.push("4")}}})])]}}])}),n("el-table-column",{attrs:{label:"Dynamic link",prop:"dynamicLink",width:"88"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("span",[t.permissions.indexOf("3")>-1?n("i",{staticClass:"fas fa-check-square tk-font-color-main",on:{click:function(e){e.stopPropagation(),t.permissions.splice(t.permissions.indexOf("3"),1)}}}):n("i",{staticClass:"far fa-square tk-font-color-lightGray",on:{click:function(e){return e.stopPropagation(),t.permissions.push("3")}}})])]}}])}),n("el-table-column",{attrs:{label:"Console",prop:"console",width:"88"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("span",[t.permissions.indexOf("2")>-1?n("i",{staticClass:"fas fa-check-square tk-font-color-main",on:{click:function(e){e.stopPropagation(),t.permissions.splice(t.permissions.indexOf("2"),1)}}}):n("i",{staticClass:"far fa-square tk-font-color-lightGray",on:{click:function(e){return e.stopPropagation(),t.permissions.push("2")}}})])]}}])}),n("el-table-column",{attrs:{label:"Logs",prop:"logs",width:"60"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("span",[t.permissions.indexOf("1")>-1?n("i",{staticClass:"fas fa-check-square tk-font-color-main",on:{click:function(e){e.stopPropagation(),t.permissions.splice(t.permissions.indexOf("1"),1)}}}):n("i",{staticClass:"far fa-square tk-font-color-lightGray",on:{click:function(e){return e.stopPropagation(),t.permissions.push("1")}}})])]}}])}),n("el-table-column",{attrs:{label:"Administration",prop:"administration",width:"140"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("span",[t.permissions.indexOf("0")>-1?n("i",{staticClass:"fas fa-check-square tk-font-color-main",on:{click:function(e){e.stopPropagation(),t.permissions.splice(t.permissions.indexOf("0"),1)}}}):n("i",{staticClass:"far fa-square tk-font-color-lightGray",on:{click:function(e){return e.stopPropagation(),t.permissions.push("0")}}})])]}}])}),n("el-table-column",{attrs:{label:"Messaging",prop:"messaging","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("span",[t.permissions.indexOf("6")>-1?n("i",{staticClass:"fas fa-check-square tk-font-color-main",on:{click:function(e){e.stopPropagation(),t.permissions.splice(t.permissions.indexOf("6"),1)}}}):n("i",{staticClass:"far fa-square tk-font-color-lightGray",on:{click:function(e){return e.stopPropagation(),t.permissions.push("6")}}})])]}}])}),n("el-table-column",{attrs:{width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",{staticClass:"tk-console-table-fa-btn"},[n("i",{staticClass:"fas fa-minus-circle tk-font-color-lightGray tk-px-margin-right-px10",on:{click:function(t){return e.removeAccountType(a)}}})])]}}])})],1)],1),n("template",{slot:"footer"},[n("base-button",{staticClass:"tk-font-color-white tk-bg-color-main tk-border-none",attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),e.showAccountType=!1}}},[e._v("Done")])],1)],2),n("modal",{attrs:{show:e.showAddAccount,id:"addAccount"},on:{"update:show":function(t){e.showAddAccount=t}}},[n("template",{slot:"header"},[n("h5",{staticClass:"modal-title"},[e._v("New Account")])]),n("div",{staticClass:"tk-popup-content"},[n("div",{staticStyle:{"margin-bottom":"20px","text-align":"center"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("br"),n("br"),n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("br"),n("br"),n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("br"),n("br"),n("el-select",{staticStyle:{width:"300px"},model:{value:e.currentAccountType,callback:function(t){e.currentAccountType=t},expression:"currentAccountType"}},e._l(e.accountType,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),n("template",{slot:"footer"},[n("base-button",{staticClass:"tk-font-color-lightGray tk-border-none",attrs:{type:"secondary"},on:{click:function(t){t.preventDefault(),e.showAddAccount=!1}}},[e._v("Close")]),n("button-with-loading",{staticStyle:{margin:"0 0 0 1rem"},attrs:{text:"Create",type:"main",complete:e.isButtonLoadingComplete},on:{start:e.createNewAccount}})],1)],2),n("modal",{attrs:{show:e.showRemoveAccount,id:"removeAccount"},on:{"update:show":function(t){e.showRemoveAccount=t}}},[n("template",{slot:"header"},[n("h5",{staticClass:"modal-title"},[e._v("Delete Account")])]),n("div",{staticClass:"tk-popup-content"},[e._v(" Are you sure to delete the account "),e.deleteAccountIndex>=0?n("strong",[e._v("["+e._s(e.accounts[e.deleteAccountIndex].name)+"]")]):e._e()]),n("template",{slot:"footer"},[n("base-button",{staticClass:"tk-font-color-lightGray tk-border-none",attrs:{type:"secondary"},on:{click:function(t){t.preventDefault(),e.showRemoveAccount=!1}}},[e._v("Close")]),n("base-button",{staticClass:"tk-font-color-white tk-bg-color-red tk-border-none",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.confirmRemoveAccount(t)}}},[e._v("Delete")])],1)],2)],1)},s=[],r=(n("5194"),n("9010"),n("82a8"),n("2a39"),n("6a61"),n("9ad1")),c=n("2cb5"),i=(n("9102"),n("2984"),n("3aa8")),l=n.n(i),u=(n("086f"),n("ce6c")),p=n.n(u),m=(n("cc43"),n("855f")),d=n.n(m),f=(n("567e"),n("2b3e")),h=n.n(f),y=(n("93fd"),n("60cf")),g=n.n(y),w=(n("ca6c"),n("2c83")),b=n.n(w),k=(n("31d0"),n("60bf")),v=n.n(k),A=(n("4f55"),n("c944")),T=n.n(A),x=n("a336"),C=n.n(x),_=n("a125"),S={components:(a={},Object(c["a"])(a,T.a.name,T.a),Object(c["a"])(a,v.a.name,v.a),Object(c["a"])(a,b.a.name,b.a),Object(c["a"])(a,g.a.name,g.a),Object(c["a"])(a,h.a.name,h.a),Object(c["a"])(a,d.a.name,d.a),Object(c["a"])(a,p.a.name,p.a),Object(c["a"])(a,l.a.name,l.a),Object(c["a"])(a,"buttonWithLoading",(function(){return n.e("chunk-a8f506b8").then(n.bind(null,"6ea5"))})),a),data:function(){return{deleteAccountIndex:-1,showRemoveAccount:!1,showAccountType:!1,newAccountType:"",newAccountTypePermissions:[],showAddAccount:!1,name:"",email:"",password:"",currentAccountType:"",newAccount:{userId:"",name:"",email:"",password:"",createTime:"",typeId:""},accounts:[],accountType:[],permissions:[],consoleUser:null,isButtonLoadingComplete:!1}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=localStorage.getItem("auth_user"),e.$tools.isNull(n)||(n=JSON.parse(n)),t.next=4,_["a"].getAccountManagement();case 4:if(a=t.sent,e.accounts=a.accounts,e.accounts.some((function(t){t.userId!=n.uid||(e.consoleUser=t)})),e.accountType=a.accountType,e.permissions=a.permissions,e.initHover(),e.$tools.isNull(e.consoleUser)){t.next=13;break}return t.next=13,_["a"].createLogs({id:e.$tools.generateId(),email:e.consoleUser.email,name:e.consoleUser.name,createTime:String(parseInt((new Date).getTime()/1e3)),action:"Query",documentPath:"/config/accountManagement",parameters:"",pageName:"Administration"});case 13:case"end":return t.stop()}}),t)})))()},watch:{accounts:{handler:function(e,t){this.initHover(),_["a"].updateAccountManagement({accounts:this.accounts})},deep:!0},accountType:{handler:function(e,t){_["a"].updateAccountManagement({accountType:this.accountType})},deep:!0}},methods:{createUser:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={},n.t0=e,n.next=0===n.t0?4:1===n.t0?6:2===n.t0?8:10;break;case 4:return a={name:"Marian",email:"marian.lawas@yahoo.com",password:"Spelist100",typeId:"2"},n.abrupt("break",10);case 6:return a={name:"tkMarketer",email:"tkmarketer@tunekey.test",password:"tunekey100",typeId:"2"},n.abrupt("break",10);case 8:return a={name:"tunekeyTeam1",email:"tunekeyTeam1@gmail.com",password:"tunekey100",typeId:"0"},n.abrupt("break",10);case 10:o=t.$firebase.functions().httpsCallable("createManageAccount"),o(a).then((function(e){}));case 12:case"end":return n.stop()}}),n)})))()},getPermissionsByTypeId:function(e){var t=[];return this.accountType.some((function(n){n.id!=e||(t=n.permissions)})),t},formatAccountType:function(e){var t="";return this.accountType.some((function(n){n.id!=e||(t=n.name)})),t},formatMMDDYY:function(e){return this.$tools.formatMMDDYY(1e3*e)},changeAccountType:function(e,t){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.typeId=t.id,a.next=3,_["a"].createLogs({id:n.$tools.generateId(),email:n.consoleUser.email,name:n.consoleUser.name,createTime:String(parseInt((new Date).getTime()/1e3)),action:"Update",documentPath:"/config/accountManagement",parameters:JSON.stringify(e),pageName:"Administration"});case 3:case"end":return a.stop()}}),a)})))()},initHover:function(){setTimeout((function(){C()(".el-table__row").unbind("mouseover"),C()(".el-table__row").unbind("mouseleave");for(var e=function(e){var t=e;C()(".el-table__row").eq(t).mouseover((function(){C()(".el-table__row").eq(t).find(".tk-console-table-fa-btn").show()})),C()(".el-table__row").eq(t).mouseleave((function(){C()(".el-table__row").eq(t).find(".tk-console-table-fa-btn").hide()}))},t=0;t<C()(".el-table__row").length;t++)e(t)}),100)},createNewAccount:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e,!n.$tools.isNull(n.name)){t.next=4;break}return n.$notify({message:"Name is empty!",type:"error"}),t.abrupt("return",!1);case 4:if(!n.$tools.isNull(n.email)){t.next=7;break}return n.$notify({message:"Email is empty!",type:"error"}),t.abrupt("return",!1);case 7:if(!n.$tools.isNull(n.password)){t.next=10;break}return n.$notify({message:"Password is empty!",type:"error"}),t.abrupt("return",!1);case 10:if(!n.$tools.isNull(n.currentAccountType)){t.next=13;break}return n.$notify({message:"Account type is empty!",type:"error"}),t.abrupt("return",!1);case 13:return a=!1,t.next=16,n.accounts.some((function(e,t){e.email!=n.email||(a=!0)}));case 16:return 0,t.next=19,n.accountType.some((function(e,t){e.typeName!=n.currentAccountType||t}));case 19:if(a){t.next=27;break}return e.isButtonLoadingComplete=!0,o=e.$firebase.functions().httpsCallable("createManageAccount"),t.next=24,o({name:n.name,email:n.email,password:n.password,typeId:n.currentAccountType}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.accounts.push(t.data.data),_["a"].createLogs({id:n.$tools.generateId(),email:n.consoleUser.email,name:n.consoleUser.name,createTime:String(parseInt((new Date).getTime()/1e3)),action:"Create",documentPath:"/config/accountManagement",parameters:JSON.stringify(t.data.data),pageName:"Administration"}),setTimeout((function(){n.name="",n.email="",n.password="",n.currentAccountType="",n.showAddAccount=!1,n.initHover()}),100);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 24:e.isButtonLoadingComplete=!1,t.next=28;break;case 27:n.$notify({message:"Duplicate email!",type:"warning"});case 28:case"end":return t.stop()}}),t)})))()},removeAccount:function(e){var t=0;this.showRemoveAccount=!0,this.accounts.some((function(n,a){n.userId!=e.userId||(t=a)})),this.deleteAccountIndex=t},confirmRemoveAccount:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.accounts[e.deleteAccountIndex],e.accounts.splice(e.deleteAccountIndex,1),e.showRemoveAccount=!1,e.deleteAccountIndex=-1,a=e.$firebase.functions().httpsCallable("deleteManageAccount"),a({userId:n.userId}).then((function(e){200==e.data.code&&_["a"].createLogs({id:self.$tools.generateId(),email:self.consoleUser.email,name:self.consoleUser.name,createTime:String(parseInt((new Date).getTime()/1e3)),action:"Delete",documentPath:"/config/accountManagement",parameters:JSON.stringify(n),pageName:"Administration"})}));case 6:case"end":return t.stop()}}),t)})))()},removeAccountType:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=0,t.accountType.some((function(t,n){t.id!=e.id||(a=n)})),o=t.accountType[a],t.accountType.splice(a,1),n.next=6,_["a"].createLogs({id:t.$tools.generateId(),email:t.consoleUser.email,name:t.consoleUser.name,createTime:String(parseInt((new Date).getTime()/1e3)),action:"Delete",documentPath:"/config/accountManagement",parameters:JSON.stringify(o),pageName:"Administration"});case 6:case"end":return n.stop()}}),n)})))()},addNewAccountType:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!1,t.next=3,e.accountType.some((function(t,a){t.typeName!=e.newAccountType||(n=!0)}));case 3:if(!n){t.next=7;break}e.$notify({message:"Duplicate account type!",type:"warning"}),t.next=17;break;case 7:if(""!=e.newAccountType){t.next=11;break}e.$notify({message:"Empty value!",type:"error"}),t.next=17;break;case 11:return a={id:(new Date).getTime(),name:e.newAccountType,permissions:e.newAccountTypePermissions},e.accountType.push(a),_["a"].updateAccountManagement({accountType:e.accountType}),t.next=16,_["a"].createLogs({id:e.$tools.generateId(),email:e.consoleUser.email,name:e.consoleUser.name,createTime:String(parseInt((new Date).getTime()/1e3)),action:"Create",documentPath:"/config/accountManagement",parameters:JSON.stringify(a),pageName:"Administration"});case 16:self.initHover();case 17:e.newAccountType="",e.newAccountTypePermissions=[];case 19:case"end":return t.stop()}}),t)})))()}}},O=S,I=(n("5ff1"),n("5d22")),P=Object(I["a"])(O,o,s,!1,null,null,null);t["default"]=P.exports}}]);
//# sourceMappingURL=chunk-7e235f36.ebd9b6e6.js.map