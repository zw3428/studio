(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b675a"],{"1cf8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("notifications"),a("img",{staticStyle:{width:"50%",position:"absolute",top:"0",left:"0"},attrs:{src:"/img/brand/tk_login_pic.png"}}),a("div",{staticClass:"container",staticStyle:{position:"relative","z-index":"1"}},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"tk-bg-color-white tk-px-margin-top-px100 tk-text-center"},[a("img",{staticClass:"tk-px-width-px90",attrs:{src:"/img/brand/tk_logo_icon.png"}}),a("fade-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.failed,expression:"failed"}],staticClass:"tk-font-color-orange tk-px-margin-top-px30 text-lg"},[a("span",{staticClass:"tk-opacity-0"},[t._v("0")]),a("span",{staticClass:"text-sm"},[t._v(t._s(t.failedMsg))]),a("span",{staticClass:"tk-opacity-0"},[t._v("0")])])]),a("fade-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.failed,expression:"!failed"}],staticClass:"tk-font-color-lightGray tk-px-margin-top-px30 text-lg"},[a("span",[t._v("Marketer")])])])],1)]),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-5 col-md-7 tk-px-margin-top-px30"},[a("validation-observer",{ref:"formValidator"},[a("form",{staticStyle:{width:"335px",margin:"0 auto"},attrs:{role:"form"}},[[a("base-input",{attrs:{alternative:"",name:"Email","prepend-icon":"fas fa-user",placeholder:"Your account",inputClasses:"tk-px-height-px64",inputGroupClasses:"tk-border-color-gray-200",id:"loginAccount"},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}}),a("base-input",{staticClass:"tk-form-input-pwd",attrs:{alternative:"",name:"Password",rules:{required:!1},"prepend-icon":"ni ni-lock-circle-open",type:"password",placeholder:"Password",inputClasses:"tk-px-height-px64",inputGroupClasses:"tk-border-color-gray-200"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}}),a("div",{staticClass:"text-center"},[a("button-with-loading",{staticStyle:{margin:"30px auto 1rem"},attrs:{text:"LOGIN",width:"180",type:t.invalidEmail?"disable":"main",complete:t.isButtonLoadingComplete},on:{start:t.login}})],1)]],2)])],1)])]),t.alert.isShow?a("alert",{attrs:{title:this.alert.title,content:this.alert.content,left:this.alert.buttons.left.title,right:this.alert.buttons.right.title},on:{onLeftTapped:this.alert.buttons.left.action,onRightTapped:this.alert.buttons.right.action}}):t._e()],1)},n=[],o=(a("2a39"),a("6a61"),a("9ad1")),s=(a("a336"),a("f5ef"),a("41dc")),l=a("5e3a"),r={components:{avatar:function(){return Promise.resolve().then(a.bind(null,"7a12"))},buttonWithLoading:function(){return a.e("chunk-a8f506b8").then(a.bind(null,"6ea5"))},FadeTransition:s["b"],alert:function(){return a.e("chunk-2d0bdced").then(a.bind(null,"2e26"))}},data:function(){return{model:{fullName:"",email:"",password:""},invalidEmail:!0,invalidPwd:!0,loading:!1,isButtonLoadingComplete:!1,failed:!1,failedMsg:"",alert:{isShow:!1,title:"",content:"",buttons:{left:{title:"",action:function(){}},right:{title:"",action:function(){}}}}}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=localStorage.getItem("adminUser"),e.next=3,l["a"].config.doc("salesAccount").get();case 3:i=e.sent,t.$tools.isNull(a)||(a=JSON.parse(a),i.data().account===a.account&&i.data().password===a.password&&t.$router.push({name:"DynamicLink"})),n=t.$route.query,t.$tools.isNull(n)||(t.model.email=n.account);case 7:case"end":return e.stop()}}),e)})))()},watch:{failed:function(t){var e=this;t&&setTimeout((function(){e.failed=!1,e.failedMsg=""}),1e3)},model:{handler:function(t,e){this.loading||(t.email.length>0&&t.password.length>6?this.invalidEmail=!1:this.invalidEmail=!0,6===t.password.length?this.invalidPwd=!1:this.invalidPwd=!0)},deep:!0}},methods:{login:function(){var t=this;t.isButtonLoadingComplete=!1,t.$tools.isNull(t.model.email)||(t.loading=!0,l["a"].config.doc("salesAccount").get().then((function(e){if(e.exists)for(var a=e.data().sales,i=0;i<a.length;i++){if(console.log(a[i].account,t.model.email),a[i].account==t.model.email){if(a[i].password==t.model.password){var n=a[i];localStorage.setItem("adminUser",JSON.stringify(n)),t.loading=!1,t.isButtonLoadingComplete=!0,t.$router.push({name:"DynamicLink"})}else console.error("登陆失败：密码错误"),t.isButtonLoadingComplete=!0,t.$notify({message:"Login Failed, please check your password and try again!",type:"error"});break}i===a.length-1&&(console.error("登陆失败：账号错误"),t.isButtonLoadingComplete=!0,t.$notify({message:"Login Failed, please check your account and try again!",type:"error"}))}})).catch((function(e){console.error("登陆失败：",e),t.isButtonLoadingComplete=!0,t.$notify({message:"Login Failed, please try again!",type:"error"})})))}}},c=r,d=a("5d22"),u=Object(d["a"])(c,i,n,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0b675a.136648bc.js.map