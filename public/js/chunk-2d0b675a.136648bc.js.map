{"version":3,"sources":["webpack:///./src/tkViews/Pages/AdministrationLogin.vue?1892","webpack:///src/tkViews/Pages/AdministrationLogin.vue","webpack:///./src/tkViews/Pages/AdministrationLogin.vue?e7bd","webpack:///./src/tkViews/Pages/AdministrationLogin.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","staticClass","directives","name","rawName","value","expression","_v","_s","failedMsg","failed","ref","model","callback","$$v","$set","required","invalidEmail","isButtonLoadingComplete","on","login","alert","title","content","buttons","left","right","action","_e","staticRenderFns","components","avatar","buttonWithLoading","FadeTransition","data","fullName","email","password","invalidPwd","loading","isShow","watch","newVal","setTimeout","handler","length","deep","methods","self","$tools","isNull","collections","component"],"mappings":"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","file":"js/chunk-2d0b675a.136648bc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('notifications'),_c('img',{staticStyle:{\"width\":\"50%\",\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\"},attrs:{\"src\":\"/img/brand/tk_login_pic.png\"}}),_c('div',{staticClass:\"container\",staticStyle:{\"position\":\"relative\",\"z-index\":\"1\"}},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"tk-bg-color-white tk-px-margin-top-px100 tk-text-center\"},[_c('img',{staticClass:\"tk-px-width-px90\",attrs:{\"src\":\"/img/brand/tk_logo_icon.png\"}}),_c('fade-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.failed),expression:\"failed\"}],staticClass:\"tk-font-color-orange tk-px-margin-top-px30 text-lg\"},[_c('span',{staticClass:\"tk-opacity-0\"},[_vm._v(\"0\")]),_c('span',{staticClass:\"text-sm\"},[_vm._v(_vm._s(_vm.failedMsg))]),_c('span',{staticClass:\"tk-opacity-0\"},[_vm._v(\"0\")])])]),_c('fade-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.failed),expression:\"!failed\"}],staticClass:\"tk-font-color-lightGray tk-px-margin-top-px30 text-lg\"},[_c('span',[_vm._v(\"Marketer\")])])])],1)]),_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-lg-5 col-md-7 tk-px-margin-top-px30\"},[_c('validation-observer',{ref:\"formValidator\"},[_c('form',{staticStyle:{\"width\":\"335px\",\"margin\":\"0 auto\"},attrs:{\"role\":\"form\"}},[[_c('base-input',{attrs:{\"alternative\":\"\",\"name\":\"Email\",\"prepend-icon\":\"fas fa-user\",\"placeholder\":\"Your account\",\"inputClasses\":\"tk-px-height-px64\",\"inputGroupClasses\":\"tk-border-color-gray-200\",\"id\":\"loginAccount\"},model:{value:(_vm.model.email),callback:function ($$v) {_vm.$set(_vm.model, \"email\", $$v)},expression:\"model.email\"}}),_c('base-input',{staticClass:\"tk-form-input-pwd\",attrs:{\"alternative\":\"\",\"name\":\"Password\",\"rules\":{ required: false },\"prepend-icon\":\"ni ni-lock-circle-open\",\"type\":\"password\",\"placeholder\":\"Password\",\"inputClasses\":\"tk-px-height-px64\",\"inputGroupClasses\":\"tk-border-color-gray-200\"},model:{value:(_vm.model.password),callback:function ($$v) {_vm.$set(_vm.model, \"password\", $$v)},expression:\"model.password\"}}),_c('div',{staticClass:\"text-center\"},[_c('button-with-loading',{staticStyle:{\"margin\":\"30px auto 1rem\"},attrs:{\"text\":\"LOGIN\",\"width\":\"180\",\"type\":_vm.invalidEmail ? 'disable' : 'main',\"complete\":_vm.isButtonLoadingComplete},on:{\"start\":_vm.login}})],1)]],2)])],1)])]),(_vm.alert.isShow)?_c('alert',{attrs:{\"title\":this.alert.title,\"content\":this.alert.content,\"left\":this.alert.buttons.left.title,\"right\":this.alert.buttons.right.title},on:{\"onLeftTapped\":this.alert.buttons.left.action,\"onRightTapped\":this.alert.buttons.right.action}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- Header -->\n    <notifications></notifications>\n    <img\n      style=\"width: 50%; position: absolute; top: 0; left: 0\"\n      src=\"/img/brand/tk_login_pic.png\"\n    />\n    <!-- Page content -->\n    <div class=\"container\" style=\"position: relative; z-index: 1\">\n      <div class=\"row justify-content-center\">\n        <div class=\"tk-bg-color-white tk-px-margin-top-px100 tk-text-center\">\n          <img src=\"/img/brand/tk_logo_icon.png\" class=\"tk-px-width-px90\" />\n          <fade-transition>\n            <div\n              class=\"tk-font-color-orange tk-px-margin-top-px30 text-lg\"\n              v-show=\"failed\"\n            >\n              <span class=\"tk-opacity-0\">0</span>\n              <span class=\"text-sm\">{{ failedMsg }}</span>\n              <span class=\"tk-opacity-0\">0</span>\n            </div>\n          </fade-transition>\n          <fade-transition>\n            <div\n              class=\"tk-font-color-lightGray tk-px-margin-top-px30 text-lg\"\n              v-show=\"!failed\"\n            >\n              <span>Marketer</span>\n            </div>\n          </fade-transition>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-lg-5 col-md-7 tk-px-margin-top-px30\">\n          <validation-observer ref=\"formValidator\">\n            <form role=\"form\" style=\"width: 335px; margin: 0 auto\">\n              <!-- account -->\n              <template>\n                <base-input\n                  alternative\n                  name=\"Email\"\n                  prepend-icon=\"fas fa-user\"\n                  placeholder=\"Your account\"\n                  v-model=\"model.email\"\n                  inputClasses=\"tk-px-height-px64\"\n                  inputGroupClasses=\"tk-border-color-gray-200\"\n                  id=\"loginAccount\"\n                ></base-input>\n\n                <base-input\n                  alternative\n                  name=\"Password\"\n                  :rules=\"{ required: false }\"\n                  prepend-icon=\"ni ni-lock-circle-open\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  v-model=\"model.password\"\n                  inputClasses=\"tk-px-height-px64\"\n                  inputGroupClasses=\"tk-border-color-gray-200\"\n                  class=\"tk-form-input-pwd\"\n                >\n                </base-input>\n\n                <div class=\"text-center\">\n                  <button-with-loading\n                    style=\"margin: 30px auto 1rem\"\n                    text=\"LOGIN\"\n                    @start=\"login\"\n                    width=\"180\"\n                    :type=\"invalidEmail ? 'disable' : 'main'\"\n                    :complete=\"isButtonLoadingComplete\"\n                  ></button-with-loading>\n                </div>\n              </template>\n            </form>\n          </validation-observer>\n        </div>\n      </div>\n    </div>\n\n    <alert\n      :title=\"this.alert.title\"\n      :content=\"this.alert.content\"\n      :left=\"this.alert.buttons.left.title\"\n      :right=\"this.alert.buttons.right.title\"\n      v-if=\"alert.isShow\"\n      @onLeftTapped=\"this.alert.buttons.left.action\"\n      @onRightTapped=\"this.alert.buttons.right.action\"\n    >\n    </alert>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport $ from \"jquery\";\nimport bus from \"@/bus.js\";\nimport { FadeTransition } from \"vue2-transitions\";\nimport collections from \"@/services/collections\";\n\nexport default {\n  components: {\n    avatar: () => import(\"@/tkViews/components/layout/Avatar\"),\n    buttonWithLoading: () => import(\"../components/layout/ButtonWithLoading\"),\n    FadeTransition,\n    alert: () => import(\"../components/Modal/Alert\"),\n  },\n  data() {\n    return {\n      model: {\n        fullName: \"\",\n        email: \"\",\n        password: \"\",\n      },\n      invalidEmail: true,\n      invalidPwd: true,\n      loading: false,\n      isButtonLoadingComplete: false,\n      failed: false,\n      failedMsg: \"\",\n      alert: {\n        isShow: false,\n        title: \"\",\n        content: \"\",\n        buttons: {\n          left: {\n            title: \"\",\n            action: () => {},\n          },\n          right: {\n            title: \"\",\n            action: () => {},\n          },\n        },\n      },\n    };\n  },\n  async created() {\n    let user = localStorage.getItem(\"adminUser\");\n    let info = await collections.config.doc(\"salesAccount\").get();\n    if (!this.$tools.isNull(user)) {\n      user = JSON.parse(user);\n      if (\n        info.data().account === user.account &&\n        info.data().password === user.password\n      ) {\n        this.$router.push({ name: \"DynamicLink\" });\n      }\n    }\n\n    let query = this.$route.query;\n    if (!this.$tools.isNull(query)) {\n      this.model.email = query.account;\n    }\n  },\n  watch: {\n    failed(newVal) {\n      if (newVal) {\n        setTimeout(() => {\n          this.failed = false;\n          this.failedMsg = \"\";\n        }, 1000);\n      }\n    },\n    model: {\n      handler(newVal, oldVal) {\n        if (!this.loading) {\n          if (newVal.email.length > 0 && newVal.password.length > 6) {\n            this.invalidEmail = false;\n          } else {\n            this.invalidEmail = true;\n          }\n\n          if (newVal.password.length === 6) {\n            this.invalidPwd = false;\n          } else {\n            this.invalidPwd = true;\n          }\n        }\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    login() {\n      let self = this;\n      self.isButtonLoadingComplete = false;\n      if (!self.$tools.isNull(self.model.email)) {\n        self.loading = true;\n\n        collections.config\n          .doc(\"salesAccount\")\n          .get()\n          .then((doc) => {\n            if (doc.exists) {\n              let sales = doc.data().sales;\n              for (let i = 0; i < sales.length; i++) {\n                console.log(sales[i].account, self.model.email)\n                if (sales[i].account == self.model.email) {\n                  if (sales[i].password == self.model.password) {\n                    let user = sales[i];\n                    // console.log(\"登陆成功：\", user);\n\n                    localStorage.setItem(\"adminUser\", JSON.stringify(user));\n\n                    self.loading = false;\n                    self.isButtonLoadingComplete = true;\n\n                    self.$router.push({ name: \"DynamicLink\" });\n                  } else {\n                    console.error(\"登陆失败：密码错误\");\n                    self.isButtonLoadingComplete = true;\n\n                    self.$notify({\n                      message:\n                        \"Login Failed, please check your password and try again!\",\n                      type: \"error\",\n                    });\n                  }\n                  break;\n                } else {\n                  if (i === sales.length - 1) {\n                    console.error(\"登陆失败：账号错误\");\n                    self.isButtonLoadingComplete = true;\n\n                    self.$notify({\n                      message:\n                        \"Login Failed, please check your account and try again!\",\n                      type: \"error\",\n                    });\n                  }\n                }\n              }\n            }\n          })\n          .catch((error) => {\n            console.error(\"登陆失败：\", error);\n            self.isButtonLoadingComplete = true;\n\n            self.$notify({\n              message: \"Login Failed, please try again!\",\n              type: \"error\",\n            });\n          });\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./AdministrationLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./AdministrationLogin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdministrationLogin.vue?vue&type=template&id=6bc661bc&\"\nimport script from \"./AdministrationLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./AdministrationLogin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}