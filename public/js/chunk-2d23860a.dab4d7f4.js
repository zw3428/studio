(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d23860a"],{feb7:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6"},[a("div",{staticClass:"row align-items-center py-4"},[a("div",{staticClass:"col-lg-6 col-7"},[a("h6",{staticClass:"h2 text-white d-inline-block mb-0"},[t._v("Lesson Types")]),a("nav",{staticClass:"d-none d-md-inline-block ml-md-4",attrs:{"aria-label":"breadcrumb"}},[a("route-breadcrumb")],1)]),a("div",{staticClass:"col-lg-6 col-5 text-right"})])]),a("div",{staticClass:"container-fluid mt--6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4 card tk-px-margin-bottom-px0",staticStyle:{height:"calc(100vh - 90px)"}},[t.loading?a("card-loading"):[a("div",{staticClass:"card-header",staticStyle:{padding:"1rem 0"}},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-12 text-right"},[a("base-button",{staticClass:"tk-font-color-main",attrs:{size:"sm",type:"neutral"},on:{click:function(e){e.preventDefault(),t.showPreview=!1,t.showCreate=!0,t.hasPackage=!1,t.clearSelected()}}},[t._v("Create")])],1)])]),a("div",{staticClass:"card-body tk-px-padding-px0"},[a("inline-actions-table",{staticClass:"tk-table-padding",attrs:{lessonTypes:t.lessonTypes},on:{preview:t.preview}})],1)]],2),a("div",{staticClass:"col-lg-8 card-wrapper tk-position-relative"},[a("img",{staticClass:"tk-px-margin-top-px80 tk-position-absolute",staticStyle:{width:"calc(100% - 80px)",left:"50%",transform:"translateX(-50%)"},attrs:{src:"/img/icons/tk/img_type.png"}}),a("div",{staticClass:"row"},[t.showPreview||t.showCreate?a("div",{staticClass:"col-lg-7 card-wrapper"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header",staticStyle:{padding:"1rem"}},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-6"},[t.showPreview?a("h5",{staticClass:"h3 mb-0"},[t._v(" Lesson Type Detail ")]):a("h5",{staticClass:"h3 mb-0"},[t._v("New Lesson Type")])]),a("div",{staticClass:"col-6 text-right"},[t.showPreview?a("span",{staticClass:"btn btn-sm btn-danger tk-bg-color-red tk-font-color-white tk-border-color-red",on:{click:function(e){return e.preventDefault(),t.deleteLessonType(e)}}},[t._v("Delete")]):t._e(),a("button-with-loading",{staticStyle:{margin:"0 1.5rem 0 0",display:"inline-block"},attrs:{type:"main",size:"40",fontSize:"10",padding:"5px 8px",text:"Save",complete:t.isButtonLoadingComplete},on:{start:t.saveLessonType}}),a("span",{staticClass:"tk-font-color-main tk-cursor-pointer",staticStyle:{"margin-right":"12px"},on:{click:function(e){e.preventDefault(),t.showPreview=!1,t.showCreate=!1,t.initDuration()}}},[a("i",{staticClass:"fas fa-times"})])],1)])]),a("div",{staticClass:"card-body",staticStyle:{padding:"1rem"}},[a("span",[a("div",{staticClass:"form-group card-wrapper tk-px-margin-bottom-px0"},[a("label",{staticClass:"form-control-label"},[t._v("Name of lesson type")]),a("div",{staticClass:"card tk-px-margin-bottom-px16"},[a("div",{staticClass:"has-label card-body tk-px-padding-px0"},[t.showPreview?a("input",{directives:[{name:"model",rawName:"v-model",value:t.previewData.name,expression:"previewData.name"}],staticClass:"form-control tk-font-color-black1",attrs:{type:"text"},domProps:{value:t.previewData.name},on:{input:function(e){e.target.composing||t.$set(t.previewData,"name",e.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.createData.name,expression:"createData.name"}],staticClass:"form-control tk-font-color-black1",attrs:{type:"text"},domProps:{value:t.createData.name},on:{input:function(e){e.target.composing||t.$set(t.createData,"name",e.target.value)}}})])])])]),a("span",[a("div",{staticClass:"form-group card-wrapper tk-px-margin-bottom-px0"},[a("div",{staticClass:"card tk-border-color-gray-300 tk-px-margin-bottom-px16"},[a("div",{staticClass:"card-body tk-px-padding-px16"},[a("div",{staticClass:"avatar rounded-circle tk-layout-inline-block tk-px-margin-right-px10 tk-bg-color-gray-200 tk-border-color-gray-200"},[t.showPreview?a("img",{attrs:{src:t.getInstrumentIcon(t.previewData)}}):a("img",{attrs:{src:t.getInstrumentIcon(t.createData)}})]),a("div",{staticClass:"tk-layout-inline-block tk-font-color-main tk-text-right tk-cursor-pointer",staticStyle:{width:"calc(100% - 64px)"},on:{click:function(e){e.preventDefault(),t.showInstruments=!t.showInstruments}}},[a("span",{staticClass:"tk-layout-inline-block text-xs"},[t._v("Select an icon")]),a("i",{staticClass:"fas fa-angle-down tk-layout-inline-block tk-px-margin-left-px8"})]),t.showInstruments?a("div",{staticClass:"tk-text-center"},[t._l(t.instruments,(function(e,s){return[a("div",{key:s,staticClass:"tk-layout-inline-block tk-px-margin-top-px16 tk-px-margin-right-px16 tk-cursor-pointer",on:{click:function(a){a.preventDefault(),t.previewData.instrumentId=e.id.toString(),t.createData.instrumentId=e.id.toString(),t.showInstruments=!1}}},[a("div",{staticClass:"avatar avatar-lg rounded-circle tk-bg-color-gray-200 tk-border-color-gray-200"},[a("img",{attrs:{src:e.url}})]),a("div",{staticClass:"tk-font-color-lightGray text-xs"},[t._v(" "+t._s(e.name)+" ")])])]}))],2):t._e()])])])]),a("span",[a("div",{staticClass:"form-group card-wrapper tk-px-margin-bottom-px0"},[a("label",{staticClass:"form-control-label"},[t._v("Duration(min)")]),a("div",{staticClass:"card tk-border-color-gray-300 tk-px-margin-bottom-px16"},[a("div",{staticClass:"has-label card-body tk-px-padding-px16"},[t._l(t.durations,(function(e,s){return[a("div",{key:s,staticClass:"tk-layout-inline-block tk-px-radius-px5 tk-px-padding-top-px10 tk-px-margin-right-px10 tk-px-padding-bottom-px10 tk-text-center tk-cursor-pointer",class:{"tk-border-color-main tk-font-color-main":e.selected,"tk-border-color-gray-300 tk-font-color-gray":!e.selected,"tk-px-margin-bottom-px10":s<4},staticStyle:{width:"calc(25% - 10px)"},on:{click:function(a){return a.preventDefault(),t.selectDuration(e)}}},[t._v(" "+t._s(e.length)+" ")])]}))],2)])])]),a("span",[a("div",{staticClass:"form-group card-wrapper tk-px-margin-bottom-px0"},[a("div",{staticClass:"card tk-border-color-gray-300 tk-px-margin-bottom-px16"},[a("div",{staticClass:"card-body tk-px-padding-px16"},[a("span",{staticClass:"tk-layout-inline-block tk-font-color-black1",staticStyle:{width:"calc(100% - 56px)"}},[t._v("Package option")]),a("base-switch",{staticClass:"mr-1 tk-layout-inline-block",attrs:{"on-text":"On","off-text":"Off",type:"main"},model:{value:t.hasPackage,callback:function(e){t.hasPackage=e},expression:"hasPackage"}}),t.previewData.package>0||t.createData.package>0?a("div",{staticClass:"invalid-feedback tk-font-color-gray tk-px-margin-top-px10",staticStyle:{display:"block"}},[a("base-button",{staticClass:"tk-font-color-green tk-position-relative tk-border-none tk-px-margin-right-px10",staticStyle:{padding:"2px 5px","background-color":"rgba(176, 238, 211, 0.48)","box-shadow":"none","z-index":"1"},on:{click:function(e){e.preventDefault(),t.showPackageList=!t.showPackageList}}},[t.showPreview?a("span",[t._v(t._s(t.previewData.package)+" lesson(s)")]):t._e(),t.showCreate?a("span",[t._v(t._s(t.createData.package)+" lesson(s)")]):t._e(),a("i",{staticClass:"fas fa-caret-down tk-px-margin-right-px0"}),t.showPackageList?a("item-list",{staticClass:"tk-position-absolute",attrs:{data:t.packageList,value:t.createData.package},on:{select:t.select}}):t._e()],1),a("span",[t._v("required")])],1):t._e()],1)])])]),a("span",[a("div",{staticClass:"form-group card-wrapper tk-px-margin-bottom-px0"},[a("label",{staticClass:"form-control-label"},[t._v("Price / lesson")]),a("div",{staticClass:"card tk-px-margin-bottom-px8"},[a("div",{staticClass:"has-label card-body tk-px-padding-px0"},[t.showPreview?a("input",{directives:[{name:"model",rawName:"v-model",value:t.previewData.price,expression:"previewData.price"}],staticClass:"form-control tk-font-color-black1",attrs:{type:"text"},domProps:{value:t.previewData.price},on:{keypress:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},input:function(e){e.target.composing||t.$set(t.previewData,"price",e.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.createData.price,expression:"createData.price"}],staticClass:"form-control tk-font-color-black1",attrs:{type:"text"},domProps:{value:t.createData.price},on:{keypress:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},input:function(e){e.target.composing||t.$set(t.createData,"price",e.target.value)}}})])]),a("div",{staticClass:"invalid-feedback tk-font-color-lightGray",staticStyle:{display:"block"}},[t._v(" Invisible for students ")])])])])])]):t._e()])])])]),a("modal",{attrs:{show:t.showDelete},on:{"update:show":function(e){t.showDelete=e}}},[a("template",{slot:"header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Delete Lesson Type")])]),a("div",{staticClass:"tk-popup-content"},[t.lessons.length>0?[t._v(" You still have "),a("strong",{staticClass:"tk-font-color-black1"},[t._v(t._s(t.lessons.length)+" lesson(s)")]),t._v(" under it. "),a("br")]:t._e(),t._v(" Do you want to delete the lesson type "),a("strong",{staticClass:"tk-font-color-black1"},[t._v("["+t._s(t.previewData.name)+"]")]),t._v(" ? ")],2),a("template",{slot:"footer"},[a("base-button",{staticClass:"tk-font-color-lightGray tk-border-none",attrs:{type:"secondary"},on:{click:function(e){e.preventDefault(),t.showDelete=!1}}},[t._v("Close")]),a("button-with-loading",{staticStyle:{margin:"0"},attrs:{type:"red",text:"Delete",color:"#fa897b",complete:t.isButtonLoadingComplete},on:{start:t.confirmDelete}})],1)],2)],1)},n=[],r=(a("2a39"),a("cfa8"),a("6a61"),a("9ad1")),i=a("f5ef"),o=a("a125"),c=a("fdc1"),l=a("5e3a"),p=(a("fef9"),{components:{InlineActionsTable:function(){return Promise.all([a.e("chunk-11a74215"),a.e("chunk-386fd0ca"),a.e("chunk-894e4fa4"),a.e("chunk-89b8ea48")]).then(a.bind(null,"8a09"))},ItemList:function(){return a.e("chunk-84d59424").then(a.bind(null,"3b77"))},cardLoading:function(){return a.e("chunk-271c3a43").then(a.bind(null,"1190"))},buttonWithLoading:function(){return a.e("chunk-a8f506b8").then(a.bind(null,"6ea5"))}},data:function(){return{isButtonLoadingComplete:!1,showDelete:!1,showPreview:!1,showCreate:!1,showPackageList:!1,previewData:{},createData:{id:"",teacherId:"",instrumentId:"",timeLength:"",price:"",type:1,name:"",deleted:!1,package:0,createTime:"",updateTime:""},hasPackage:!1,showInstruments:!1,instruments:[],durations:[],lessonTypes:[],packageList:[],lessons:[],loading:!0}},watch:{hasPackage:function(t,e){t?(this.previewData.package=5,this.createData.package=5):(this.previewData.package=0,this.createData.package=0)}},created:function(){var t=this;t.instruments=t.$tools.instruments,t.durations=t.$tools.durations;for(var e=0;e<50;e++)t.packageList.push({label:e>0?e+1+" lessons":e+1+" lesson",value:e+1});t.getLessonTypes()},methods:{clearSelected:function(){i["a"].$emit("clearSelected")},getInstrumentIcon:function(t){var e="";return this.instruments.some((function(a){parseInt(a.id)===parseInt(t.instrumentId)&&(e=a.url)})),e},getLessonTypes:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].listAllLessonTypesInStudio();case 2:t.lessonTypes=e.sent,t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},select:function(t){var e=this;e.previewData.package=t.value,e.createData.package=t.value},preview:function(t){var e=this;e.showPreview=!0,e.showCreate=!1,e.previewData=t,e.hasPackage=t.package>0,e.durations.some((function(t){t.selected=!1,parseInt(t.length)===parseInt(e.previewData.timeLength)&&(t.selected=!0)})),e.lessons=[]},selectDuration:function(t){var e=this;e.durations.some((function(t){t.selected=!1})),t.selected=!0,e.previewData.duration=t.length,e.createData.duration=t.length},initDuration:function(){this.durations.some((function(t){t.selected=!1})),this.initCreateData()},initCreateData:function(){this.createData={id:"",teacherId:"",instrumentId:"",timeLength:"",price:"",type:1,name:"",deleted:!1,package:0,createTime:"",updateTime:""}},isNull:function(t){return this.$tools.isNull(t)},deleteLessonType:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.showDelete=!0,a.lessons=[],e.next=5,o["a"].getLessonsByLessonTypeId(a.previewData.id);case 5:a.lessons=e.sent,console.log("lessons: ",a.lessons);case 7:case"end":return e.stop()}}),e)})))()},confirmDelete:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.previewData.deleted=!0,e.next=4,l["a"].lessonType.doc(a.previewData.id).update(a.previewData).then((function(){a.isButtonLoadingComplete=!0,a.$notify({message:"Delete Success!",type:"success"})})).catch((function(t){console.log("Delete failed, error: ",t),a.$notify({message:"Delete failed, try again!",type:"error"})}));case 4:a.isButtonLoadingComplete=!1,a.showDelete=!1,a.getLessonTypes(),a.showPreview=!1;case 8:case"end":return e.stop()}}),e)})))()},saveLessonType:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,!a.showPreview){e.next=6;break}return a.previewData.updateTime=parseInt(new Date/1e3).toString(),a.previewData.price=parseInt(a.previewData.price).toString(),e.next=6,l["a"].lessonType.doc(a.previewData.id).update(a.previewData).then((function(){a.isButtonLoadingComplete=!0,a.$notify({message:"Update Success!",type:"success"})})).catch((function(t){console.log("Update failed, error: ",t),a.$notify({message:"Update failed, try again!",type:"error"})}));case 6:if(!a.showCreate){e.next=17;break}return console.log(a.createData),s=parseInt((new Date).getTime()/1e3).toString(),a.createData.createTime=s,a.createData.updateTime=s,a.createData.id=c["a"].generateId(),a.createData.teacherId=c["a"].userId(),a.createData.price=parseInt(a.createData.price).toString(),a.durations.some((function(t){t.selected&&(a.createData.timeLength=parseInt(t.length))})),e.next=17,l["a"].lessonType.doc(a.createData.id).set(a.createData).then((function(){a.isButtonLoadingComplete=!0,a.$notify({message:"Create Success!",type:"success"}),a.clearSelected(),a.preview(a.createData)})).catch((function(t){console.log("Create failed, error: ",t),a.$notify({message:"Create failed, try again!",type:"error"})}));case 17:a.isButtonLoadingComplete=!1,a.getLessonTypes();case 19:case"end":return e.stop()}}),e)})))()}}}),d=p,u=a("5d22"),g=Object(u["a"])(d,s,n,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d23860a.dab4d7f4.js.map