(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b83519ba"],{"1cf8":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("notifications"),s("img",{staticStyle:{width:"50%",position:"absolute",top:"0",left:"0"},attrs:{src:"/img/brand/tk_login_pic.png"}}),s("div",{staticClass:"container",staticStyle:{position:"relative","z-index":"1"}},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"tk-bg-color-white tk-px-margin-top-px100 tk-text-center"},[s("img",{staticClass:"tk-px-width-px90",attrs:{src:"/img/brand/tk_logo_icon.png"}}),s("fade-transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.failed,expression:"failed"}],staticClass:"tk-font-color-orange tk-px-margin-top-px30 text-lg"},[s("span",{staticClass:"tk-opacity-0"},[e._v("0")]),s("span",{staticClass:"text-sm"},[e._v(e._s(e.failedMsg))]),s("span",{staticClass:"tk-opacity-0"},[e._v("0")])])]),s("fade-transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.failed,expression:"!failed"}],staticClass:"tk-font-color-lightGray tk-px-margin-top-px30 text-lg"},[s("span",[e._v("Marketer")])])])],1)]),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-lg-5 col-md-7 tk-px-margin-top-px30"},[s("validation-observer",{ref:"formValidator"},[s("form",{staticStyle:{width:"335px",margin:"0 auto"},attrs:{role:"form"}},[[s("base-input",{attrs:{alternative:"",name:"Email","prepend-icon":"fas fa-user",placeholder:"Your account",inputClasses:"tk-px-height-px64",inputGroupClasses:"tk-border-color-gray-200",id:"loginAccount"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}}),s("base-input",{staticClass:"tk-form-input-pwd",attrs:{alternative:"",name:"Password",rules:{required:!1},"prepend-icon":"ni ni-lock-circle-open",type:"password",placeholder:"Password",inputClasses:"tk-px-height-px64",inputGroupClasses:"tk-border-color-gray-200"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}}),s("div",{staticClass:"text-center"},[s("button-with-loading",{staticStyle:{margin:"30px auto 1rem"},attrs:{text:"LOGIN",width:"180",type:e.invalidEmail?"disable":"main",complete:e.isButtonLoadingComplete},on:{start:e.login}})],1)]],2)])],1)])]),e.alert.isShow?s("alert",{attrs:{title:this.alert.title,content:this.alert.content,left:this.alert.buttons.left.title,right:this.alert.buttons.right.title},on:{onLeftTapped:this.alert.buttons.left.action,onRightTapped:this.alert.buttons.right.action}}):e._e()],1)},n=[],o=(s("2a39"),s("6a61"),s("9ad1")),i=(s("a336"),s("f5ef"),s("41dc")),l=s("5e3a"),r={components:{avatar:function(){return Promise.resolve().then(s.bind(null,"7a12"))},buttonWithLoading:function(){return s.e("chunk-5d7fb187").then(s.bind(null,"6ea5"))},FadeTransition:i["b"],alert:function(){return s.e("chunk-2d0bdced").then(s.bind(null,"2e26"))}},data:function(){return{model:{fullName:"",email:"",password:""},invalidEmail:!0,invalidPwd:!0,loading:!1,isButtonLoadingComplete:!1,failed:!1,failedMsg:"",alert:{isShow:!1,title:"",content:"",buttons:{left:{title:"",action:function(){}},right:{title:"",action:function(){}}}}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=localStorage.getItem("adminUser"),t.next=3,l["a"].config.doc("salesAccount").get();case 3:a=t.sent,e.$tools.isNull(s)||(s=JSON.parse(s),a.data().account===s.account&&a.data().password===s.password&&e.$router.push({name:"DynamicLink"})),n=e.$route.query,e.$tools.isNull(n)||(e.model.email=n.account);case 7:case"end":return t.stop()}}),t)})))()},watch:{failed:function(e){var t=this;e&&setTimeout((function(){t.failed=!1,t.failedMsg=""}),1e3)},model:{handler:function(e,t){this.loading||(e.email.length>0&&e.password.length>6?this.invalidEmail=!1:this.invalidEmail=!0,6===e.password.length?this.invalidPwd=!1:this.invalidPwd=!0)},deep:!0}},methods:{login:function(){var e=this;e.isButtonLoadingComplete=!1,e.$tools.isNull(e.model.email)||(e.loading=!0,l["a"].config.doc("salesAccount").get().then((function(t){if(t.exists)for(var s=t.data().sales,a=0;a<s.length;a++){if(console.log(s[a].account,e.model.email),s[a].account==e.model.email){if(s[a].password==e.model.password){var n=s[a];localStorage.setItem("adminUser",JSON.stringify(n)),e.loading=!1,e.isButtonLoadingComplete=!0,e.$router.push({name:"DynamicLink"})}else console.error("登陆失败：密码错误"),e.isButtonLoadingComplete=!0,e.$notify({message:"Login Failed, please check your password and try again!",type:"error"});break}a===s.length-1&&(console.error("登陆失败：账号错误"),e.isButtonLoadingComplete=!0,e.$notify({message:"Login Failed, please check your account and try again!",type:"error"}))}})).catch((function(t){console.error("登陆失败：",t),e.isButtonLoadingComplete=!0,e.$notify({message:"Login Failed, please try again!",type:"error"})})))}}},c=r,d=s("5d22"),u=Object(d["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports},"5e3a":function(e,t,s){"use strict";var a=s("1543");function n(e){return a["a"].firestore().collection(e)}t["a"]={user:n("user"),userOnline:n("user_online"),userUnreadCount:n("user_unread_count"),instrument:n("instrument"),teacher:n("teacher_info"),teacherStudentList:n("students_list"),policies:n("policy"),lessonType:n("lesson_type"),studio:n("studio_info"),cache:n("cache"),makeupPolicy:n("makeup_policy"),cancellationPolicy:n("cancellation_policy"),lessonSchedule:n("lesson_schedule"),lessonReschedule:n("lesson_reschedule"),lessonSchedulePlan:n("lesson_schedule_plan"),lessonScheduleMaterial:n("lesson_schedule_material"),lessonScheduleAssignment:n("lesson_schedule_assignment"),practice:n("practice"),achievement:n("achievement"),material:n("material"),materialHash:n("material_hash"),materialAccessControl:n("material_access_control"),student:n("students_list"),lessonScheduleConfigure:n("lesson_schedule_config"),eventConfig:n("event_config"),block:n("block"),userNotificationConfig:n("user_notification_config"),insightsCount:n("insights_count"),rescheduleMakeupRefund:n("student_reschedule_makeup_refund_history"),lessonCancellation:n("lesson_cancellation"),allowSwapStatistics:n("allow_swap_statistics"),calendarLinkSetting:n("calendar_link_setting"),googleCalendarEvents:n("google_calendar_events"),googleCalendarEventsWatch:n("google_calendar_events_watch"),userNotifications:n("user_notifications"),bugReports:n("bug_reports"),teacherReschedules:n("teacher_reschedules"),errors:n("tk_errors"),couponHistory:n("promo_codes_history"),userReceipt:n("user_receipt"),accessTokenGoogle:n("access_token_google"),appSessions:n("app_sessions"),appSessionActions:n("app_sessions_actions"),appEvents:n("app_events"),config:n("config"),googleEmail:n("google_email"),googleAccessTokenCalendar:n("google_access_token_calendar"),googleAccessTokenDrive:n("google_access_token_drive"),googleAccessTokenPhotos:n("google_access_token_photos"),googleCalendarEventsSyncToken:n("google_calendar_events_sync_token"),teacherPermissions:n("teacher_permissions"),salesMan:n("sales_man"),salesManParams:n("sales_man_params"),salesManRecords:n("sales_man_records"),salesManLinks:n("sales_man_links"),signUpViaLinkCount:n("signup_via_link_count")}}}]);
//# sourceMappingURL=chunk-b83519ba.a46642c9.js.map