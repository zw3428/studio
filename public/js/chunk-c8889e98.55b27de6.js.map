{"version":3,"sources":["webpack:///./src/tkViews/Pages/Login.vue?922f","webpack:///src/tkViews/Pages/Login.vue","webpack:///./src/tkViews/Pages/Login.vue?6a1c","webpack:///./src/tkViews/Pages/Login.vue","webpack:///./node_modules/_@babel_runtime@7.12.18@@babel/runtime/helpers/esm/typeof.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","staticClass","step","model","userId","studioId","fullName","directives","name","rawName","value","expression","_v","_s","failedMsg","failed","ref","required","email","callback","$$v","$set","invalidEmail","isButtonLoadingComplete","on","next","$event","preventDefault","loginWithFacebook","loginWithGoogle","loginWithApple","_e","min","forgotPwd","invalidPwd","login","notMe","max","passwordNotSame","invalidPwd2","signup","alert","title","content","buttons","left","right","action","staticRenderFns","components","avatar","buttonWithLoading","FadeTransition","data","password","password2","rememberMe","loading","isShow","marketerAccount","isMarketer","account","created","getMarketer","mounted","console","log","watch","newVal","setTimeout","handler","$tools","isEmail","i","length","deep","methods","getUserInfo","Promise","getTeacherInfo","self","isNull","$firebase","provider","firebase","auth","FacebookAuthProvider","signIn","addScope","component","_typeof","obj","Symbol","iterator","constructor","prototype"],"mappings":"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","file":"js/chunk-c8889e98.55b27de6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('notifications'),_c('img',{staticStyle:{\"width\":\"50%\",\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\"},attrs:{\"src\":\"/img/brand/tk_login_pic.png\"}}),_c('div',{staticClass:\"container\",staticStyle:{\"position\":\"relative\",\"z-index\":\"1\"}},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"tk-bg-color-white tk-px-margin-top-px100 tk-text-center\"},[(_vm.step !== 2)?_c('img',{staticClass:\"tk-px-width-px90\",attrs:{\"src\":\"/img/brand/tk_logo_icon.png\"}}):_c('avatar',{attrs:{\"uId\":_vm.model.userId,\"studioId\":_vm.model.studioId,\"name\":_vm.model.fullName}}),_c('fade-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.failed),expression:\"failed\"}],staticClass:\"tk-font-color-orange tk-px-margin-top-px30 text-lg\"},[_c('span',{staticClass:\"tk-opacity-0\"},[_vm._v(\"0\")]),_c('span',{staticClass:\"text-sm\"},[_vm._v(_vm._s(_vm.failedMsg))]),_c('span',{staticClass:\"tk-opacity-0\"},[_vm._v(\"0\")])])]),_c('fade-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.failed),expression:\"!failed\"}],staticClass:\"tk-font-color-lightGray tk-px-margin-top-px30 text-lg\"},[(_vm.step !== 2)?_c('span',[_vm._v(\"Get started\")]):_c('span',[_vm._v(_vm._s(_vm.model.fullName))])])])],1)]),_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-lg-5 col-md-7 tk-px-margin-top-px30\"},[_c('validation-observer',{ref:\"formValidator\"},[_c('form',{staticStyle:{\"width\":\"335px\",\"margin\":\"0 auto\"},attrs:{\"role\":\"form\"}},[(_vm.step === 1)?[_c('base-input',{attrs:{\"alternative\":\"\",\"name\":\"Email\",\"rules\":{ required: false, email: true },\"prepend-icon\":\"ni ni-email-83\",\"placeholder\":\"Your email\",\"inputClasses\":\"tk-px-height-px64\",\"inputGroupClasses\":\"tk-border-color-gray-200\",\"id\":\"loginAccount\"},model:{value:(_vm.model.email),callback:function ($$v) {_vm.$set(_vm.model, \"email\", $$v)},expression:\"model.email\"}}),_c('div',{staticClass:\"text-center\"},[_c('button-with-loading',{staticStyle:{\"margin\":\"10px auto 1rem\"},attrs:{\"text\":\"NEXT\",\"width\":\"180\",\"type\":_vm.invalidEmail ? 'disable' : 'main',\"complete\":_vm.isButtonLoadingComplete},on:{\"start\":_vm.next}})],1),_c('div',{staticClass:\"text-center text-muted mb-4 tk-px-margin-top-px0\"},[_c('small',[_vm._v(\"or\")]),_c('div',{staticClass:\"btn-wrapper text-center\"},[_c('div',{staticClass:\"btn btn-neutral btn-icon tk-border-color-gray-200\",staticStyle:{\"display\":\"block\",\"width\":\"300px\",\"height\":\"50px\",\"margin\":\"20px auto\",\"padding\":\"0\"},on:{\"click\":function($event){$event.preventDefault();return _vm.loginWithFacebook($event)}}},[_c('span',{staticClass:\"btn-inner--icon tk-layout-inline-block tk-font-color-white tk-px-radius-px5\",staticStyle:{\"background-color\":\"#3b5998\",\"line-height\":\"50px\",\"width\":\"50px\",\"height\":\"50px\"}},[_c('i',{staticClass:\"fab fa-facebook-f\"})]),_c('span',{staticClass:\"btn-inner--text tk-layout-inline-block tk-font-color-lightGray\",staticStyle:{\"width\":\"calc(100% - 50px)\",\"margin-left\":\"0\"}},[_vm._v(\"Log In with Facebook\")])]),_c('div',{staticClass:\"btn btn-neutral btn-icon tk-border-color-gray-200\",staticStyle:{\"display\":\"block\",\"width\":\"300px\",\"height\":\"50px\",\"margin\":\"14px auto\",\"padding\":\"0\"},on:{\"click\":function($event){$event.preventDefault();return _vm.loginWithGoogle($event)}}},[_c('span',{staticClass:\"btn-inner--icon tk-layout-inline-block tk-font-color-white tk-px-radius-px5\",staticStyle:{\"background-color\":\"#dc4e41\",\"line-height\":\"50px\",\"width\":\"50px\",\"height\":\"50px\"}},[_c('i',{staticClass:\"fab fa-google\"})]),_c('span',{staticClass:\"btn-inner--text tk-layout-inline-block tk-font-color-lightGray\",staticStyle:{\"width\":\"calc(100% - 50px)\",\"margin-left\":\"0\"}},[_vm._v(\"Log In with Google\")])]),_c('div',{staticClass:\"btn btn-neutral btn-icon tk-border-color-gray-200\",staticStyle:{\"display\":\"block\",\"width\":\"300px\",\"height\":\"50px\",\"margin\":\"14px auto\",\"padding\":\"0\"},on:{\"click\":function($event){$event.preventDefault();return _vm.loginWithApple($event)}}},[_c('span',{staticClass:\"btn-inner--icon tk-layout-inline-block tk-font-color-white tk-px-radius-px5\",staticStyle:{\"background-color\":\"#222\",\"line-height\":\"50px\",\"width\":\"50px\",\"height\":\"50px\"}},[_c('i',{staticClass:\"fab fa-apple\"})]),_c('span',{staticClass:\"btn-inner--text tk-layout-inline-block tk-font-color-lightGray\",staticStyle:{\"width\":\"calc(100% - 50px)\",\"margin-left\":\"0\"}},[_vm._v(\"Log In with Apple\")])])])])]:_vm._e(),(_vm.step === 2)?[_c('base-input',{staticClass:\"tk-form-input-pwd\",attrs:{\"alternative\":\"\",\"name\":\"Password\",\"rules\":{ required: false, min: 6 },\"prepend-icon\":\"ni ni-lock-circle-open\",\"type\":\"password\",\"placeholder\":\"Password\",\"inputClasses\":\"tk-px-height-px64\",\"inputGroupClasses\":\"tk-border-color-gray-200\"},model:{value:(_vm.model.password),callback:function ($$v) {_vm.$set(_vm.model, \"password\", $$v)},expression:\"model.password\"}}),_c('div',{staticClass:\"tk-text-center tk-font-color-main tk-cursor-pointer tk-font-weight-light tk-text-right\",on:{\"click\":function($event){$event.preventDefault();return _vm.forgotPwd($event)}}},[_vm._v(\" Forgot password? \")]),_c('div',{staticClass:\"text-center\"},[_c('button-with-loading',{staticStyle:{\"margin\":\"30px auto 10px\"},attrs:{\"text\":\"LOGIN\",\"width\":\"180\",\"type\":_vm.invalidPwd ? 'disable' : 'main',\"complete\":_vm.isButtonLoadingComplete},on:{\"start\":_vm.login}}),_c('div',{staticClass:\"tk-text-center tk-font-color-main tk-cursor-pointer tk-font-weight-light\",on:{\"click\":function($event){$event.preventDefault();return _vm.notMe($event)}}},[_vm._v(\" Not me? \")])],1)]:_vm._e(),(_vm.step === 3)?[_c('base-input',{attrs:{\"alternative\":\"\",\"name\":\"Name\",\"prepend-icon\":\"ni ni-single-02\",\"placeholder\":\"Full name\",\"inputClasses\":\"tk-px-height-px64\",\"inputGroupClasses\":\"tk-border-color-gray-200\"},model:{value:(_vm.model.fullName),callback:function ($$v) {_vm.$set(_vm.model, \"fullName\", $$v)},expression:\"model.fullName\"}}),_c('base-input',{attrs:{\"alternative\":\"\",\"name\":\"Password\",\"prepend-icon\":\"ni ni-lock-circle-open\",\"rules\":{ required: false, min: 6, max: 6 },\"type\":\"password\",\"placeholder\":\"Password\",\"inputClasses\":\"tk-px-height-px64\",\"inputGroupClasses\":\"tk-border-color-gray-200\"},model:{value:(_vm.model.password),callback:function ($$v) {_vm.$set(_vm.model, \"password\", $$v)},expression:\"model.password\"}}),_c('base-input',{staticClass:\"tk-form-input-pwd\",attrs:{\"alternative\":\"\",\"name\":\"Password\",\"prepend-icon\":\"ni ni-lock-circle-open\",\"rules\":{ required: false, min: 6, max: 6 },\"type\":\"password\",\"placeholder\":\"Confirm password\",\"inputClasses\":\"tk-px-height-px64\",\"inputGroupClasses\":\"tk-border-color-gray-200\"},model:{value:(_vm.model.password2),callback:function ($$v) {_vm.$set(_vm.model, \"password2\", $$v)},expression:\"model.password2\"}}),(_vm.passwordNotSame && !_vm.invalidPwd2)?_c('div',{staticClass:\"invalid-feedback\",staticStyle:{\"display\":\"block\"}},[_vm._v(\" The two passwords are not the same \")]):_vm._e(),_c('div',{staticClass:\"text-center\"},[_c('button-with-loading',{staticStyle:{\"margin\":\"24px auto 1rem\"},attrs:{\"text\":\"SIGN UP\",\"width\":\"180\",\"type\":_vm.invalidPwd || _vm.invalidPwd2 || _vm.model.fullName === ''\n                      ? 'disable'\n                      : 'main',\"complete\":_vm.isButtonLoadingComplete},on:{\"start\":_vm.signup}}),_c('div',{staticClass:\"tk-text-center tk-font-color-main tk-cursor-pointer tk-font-weight-light\",on:{\"click\":function($event){$event.preventDefault();return _vm.notMe($event)}}},[_vm._v(\" Already have an account? \")])],1)]:_vm._e()],2)])],1)])]),(_vm.alert.isShow)?_c('alert',{attrs:{\"title\":this.alert.title,\"content\":this.alert.content,\"left\":this.alert.buttons.left.title,\"right\":this.alert.buttons.right.title},on:{\"onLeftTapped\":this.alert.buttons.left.action,\"onRightTapped\":this.alert.buttons.right.action}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- Header -->\n    <notifications></notifications>\n    <img\n      style=\"width: 50%; position: absolute; top: 0; left: 0\"\n      src=\"/img/brand/tk_login_pic.png\"\n    />\n    <!-- Page content -->\n    <div class=\"container\" style=\"position: relative; z-index: 1\">\n      <div class=\"row justify-content-center\">\n        <div class=\"tk-bg-color-white tk-px-margin-top-px100 tk-text-center\">\n          <img\n            src=\"/img/brand/tk_logo_icon.png\"\n            class=\"tk-px-width-px90\"\n            v-if=\"step !== 2\"\n          />\n          <avatar\n            :uId=\"model.userId\"\n            :studioId=\"model.studioId\"\n            :name=\"model.fullName\"\n            v-else\n          ></avatar>\n          <fade-transition>\n            <div\n              class=\"tk-font-color-orange tk-px-margin-top-px30 text-lg\"\n              v-show=\"failed\"\n            >\n              <span class=\"tk-opacity-0\">0</span>\n              <span class=\"text-sm\">{{ failedMsg }}</span>\n              <span class=\"tk-opacity-0\">0</span>\n            </div>\n          </fade-transition>\n          <fade-transition>\n            <div\n              class=\"tk-font-color-lightGray tk-px-margin-top-px30 text-lg\"\n              v-show=\"!failed\"\n            >\n              <span v-if=\"step !== 2\">Get started</span>\n              <span v-else>{{ model.fullName }}</span>\n            </div>\n          </fade-transition>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-lg-5 col-md-7 tk-px-margin-top-px30\">\n          <validation-observer ref=\"formValidator\">\n            <form role=\"form\" style=\"width: 335px; margin: 0 auto\">\n              <!-- account -->\n              <template v-if=\"step === 1\">\n                <base-input\n                  alternative\n                  name=\"Email\"\n                  :rules=\"{ required: false, email: true }\"\n                  prepend-icon=\"ni ni-email-83\"\n                  placeholder=\"Your email\"\n                  v-model=\"model.email\"\n                  inputClasses=\"tk-px-height-px64\"\n                  inputGroupClasses=\"tk-border-color-gray-200\"\n                  id=\"loginAccount\"\n                ></base-input>\n\n                <div class=\"text-center\">\n                  <!-- <base-button\n                    class=\"my-4 tk-border-none\"\n                    style=\"\n                      width: 180px;\n                      height: 50px;\n                      margin-top: 10px !important;\n                    \"\n                    :class=\"{\n                      'tk-bg-color-disableBtn tk-font-color-gray': invalidEmail,\n                      'tk-bg-color-main tk-font-color-white': !invalidEmail,\n                    }\"\n                    @click.prevent=\"next\"\n                    :loading=\"loading\"\n                    >\n                      <span v-if=\"!loading\">NEXT</span>\n                    </base-button> -->\n                  <button-with-loading\n                    style=\"margin: 10px auto 1rem\"\n                    text=\"NEXT\"\n                    @start=\"next\"\n                    width=\"180\"\n                    :type=\"invalidEmail ? 'disable' : 'main'\"\n                    :complete=\"isButtonLoadingComplete\"\n                  ></button-with-loading>\n                </div>\n\n                <div class=\"text-center text-muted mb-4 tk-px-margin-top-px0\">\n                  <small>or</small>\n                  <div class=\"btn-wrapper text-center\">\n                    <div\n                      class=\"btn btn-neutral btn-icon tk-border-color-gray-200\"\n                      style=\"\n                        display: block;\n                        width: 300px;\n                        height: 50px;\n                        margin: 20px auto;\n                        padding: 0;\n                      \"\n                      @click.prevent=\"loginWithFacebook\"\n                    >\n                      <span\n                        class=\"btn-inner--icon tk-layout-inline-block tk-font-color-white tk-px-radius-px5\"\n                        style=\"\n                          background-color: #3b5998;\n                          line-height: 50px;\n                          width: 50px;\n                          height: 50px;\n                        \"\n                      >\n                        <i class=\"fab fa-facebook-f\"></i>\n                      </span>\n                      <span\n                        class=\"btn-inner--text tk-layout-inline-block tk-font-color-lightGray\"\n                        style=\"width: calc(100% - 50px); margin-left: 0\"\n                        >Log In with Facebook</span\n                      >\n                    </div>\n                    <div\n                      class=\"btn btn-neutral btn-icon tk-border-color-gray-200\"\n                      style=\"\n                        display: block;\n                        width: 300px;\n                        height: 50px;\n                        margin: 14px auto;\n                        padding: 0;\n                      \"\n                      @click.prevent=\"loginWithGoogle\"\n                    >\n                      <span\n                        class=\"btn-inner--icon tk-layout-inline-block tk-font-color-white tk-px-radius-px5\"\n                        style=\"\n                          background-color: #dc4e41;\n                          line-height: 50px;\n                          width: 50px;\n                          height: 50px;\n                        \"\n                      >\n                        <i class=\"fab fa-google\"></i>\n                      </span>\n                      <span\n                        class=\"btn-inner--text tk-layout-inline-block tk-font-color-lightGray\"\n                        style=\"width: calc(100% - 50px); margin-left: 0\"\n                        >Log In with Google</span\n                      >\n                    </div>\n                    <div\n                      class=\"btn btn-neutral btn-icon tk-border-color-gray-200\"\n                      style=\"\n                        display: block;\n                        width: 300px;\n                        height: 50px;\n                        margin: 14px auto;\n                        padding: 0;\n                      \"\n                      @click.prevent=\"loginWithApple\"\n                    >\n                      <span\n                        class=\"btn-inner--icon tk-layout-inline-block tk-font-color-white tk-px-radius-px5\"\n                        style=\"\n                          background-color: #222;\n                          line-height: 50px;\n                          width: 50px;\n                          height: 50px;\n                        \"\n                      >\n                        <i class=\"fab fa-apple\"></i>\n                      </span>\n                      <span\n                        class=\"btn-inner--text tk-layout-inline-block tk-font-color-lightGray\"\n                        style=\"width: calc(100% - 50px); margin-left: 0\"\n                        >Log In with Apple</span\n                      >\n                    </div>\n                  </div>\n                </div>\n              </template>\n\n              <!-- login -->\n              <template v-if=\"step === 2\">\n                <!-- :rules=\"{ required: true, min: 6, max: 6 }\"  -->\n                <base-input\n                  alternative\n                  name=\"Password\"\n                  :rules=\"{ required: false, min: 6 }\"\n                  prepend-icon=\"ni ni-lock-circle-open\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  v-model=\"model.password\"\n                  inputClasses=\"tk-px-height-px64\"\n                  inputGroupClasses=\"tk-border-color-gray-200\"\n                  class=\"tk-form-input-pwd\"\n                >\n                </base-input>\n\n                <div\n                  class=\"tk-text-center tk-font-color-main tk-cursor-pointer tk-font-weight-light tk-text-right\"\n                  @click.prevent=\"forgotPwd\"\n                >\n                  Forgot password?\n                </div>\n\n                <div class=\"text-center\">\n                  <button-with-loading\n                    style=\"margin: 30px auto 10px\"\n                    text=\"LOGIN\"\n                    @start=\"login\"\n                    width=\"180\"\n                    :type=\"invalidPwd ? 'disable' : 'main'\"\n                    :complete=\"isButtonLoadingComplete\"\n                  ></button-with-loading>\n                  <div\n                    class=\"tk-text-center tk-font-color-main tk-cursor-pointer tk-font-weight-light\"\n                    @click.prevent=\"notMe\"\n                  >\n                    Not me?\n                  </div>\n                </div>\n              </template>\n\n              <!-- sign up -->\n              <template v-if=\"step === 3\">\n                <base-input\n                  alternative\n                  name=\"Name\"\n                  prepend-icon=\"ni ni-single-02\"\n                  placeholder=\"Full name\"\n                  v-model=\"model.fullName\"\n                  inputClasses=\"tk-px-height-px64\"\n                  inputGroupClasses=\"tk-border-color-gray-200\"\n                ></base-input>\n\n                <base-input\n                  alternative\n                  name=\"Password\"\n                  prepend-icon=\"ni ni-lock-circle-open\"\n                  :rules=\"{ required: false, min: 6, max: 6 }\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  v-model=\"model.password\"\n                  inputClasses=\"tk-px-height-px64\"\n                  inputGroupClasses=\"tk-border-color-gray-200\"\n                ></base-input>\n\n                <base-input\n                  alternative\n                  name=\"Password\"\n                  prepend-icon=\"ni ni-lock-circle-open\"\n                  :rules=\"{ required: false, min: 6, max: 6 }\"\n                  type=\"password\"\n                  placeholder=\"Confirm password\"\n                  v-model=\"model.password2\"\n                  class=\"tk-form-input-pwd\"\n                  inputClasses=\"tk-px-height-px64\"\n                  inputGroupClasses=\"tk-border-color-gray-200\"\n                ></base-input>\n\n                <div\n                  class=\"invalid-feedback\"\n                  v-if=\"passwordNotSame && !invalidPwd2\"\n                  style=\"display: block\"\n                >\n                  The two passwords are not the same\n                </div>\n\n                <div class=\"text-center\">\n                  <!-- <base-button\n                    native-type=\"submit\"\n                    class=\"my-4 tk-border-none\"\n                    style=\"\n                      width: 180px;\n                      height: 50px;\n                      margin-top: 30px !important;\n                      margin-bottom: 8px !important;\n                    \"\n                    :class=\"{\n                      'tk-bg-color-disableBtn tk-font-color-gray':\n                        invalidPwd || invalidPwd2 || model.fullName === '',\n                      'tk-bg-color-main tk-font-color-white':\n                        !invalidPwd && !invalidPwd2 && model.fullName !== '',\n                    }\"\n                    :loading=\"loading\"\n                    @click.prevent=\"signup\"\n                  >\n                    <span v-if=\"!loading\">SIGN UP</span>\n                  </base-button> -->\n                  <button-with-loading\n                    style=\"margin: 24px auto 1rem\"\n                    text=\"SIGN UP\"\n                    @start=\"signup\"\n                    width=\"180\"\n                    :type=\"\n                      invalidPwd || invalidPwd2 || model.fullName === ''\n                        ? 'disable'\n                        : 'main'\n                    \"\n                    :complete=\"isButtonLoadingComplete\"\n                  ></button-with-loading>\n                  <div\n                    class=\"tk-text-center tk-font-color-main tk-cursor-pointer tk-font-weight-light\"\n                    @click.prevent=\"notMe\"\n                  >\n                    Already have an account?\n                  </div>\n                </div>\n              </template>\n            </form>\n          </validation-observer>\n        </div>\n      </div>\n    </div>\n\n    <alert\n      :title=\"this.alert.title\"\n      :content=\"this.alert.content\"\n      :left=\"this.alert.buttons.left.title\"\n      :right=\"this.alert.buttons.right.title\"\n      v-if=\"alert.isShow\"\n      @onLeftTapped=\"this.alert.buttons.left.action\"\n      @onRightTapped=\"this.alert.buttons.right.action\"\n    >\n    </alert>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport commons from \"../../util/commons\";\nimport $ from \"jquery\";\nimport bus from \"@/bus.js\";\nimport { FadeTransition } from \"vue2-transitions\";\nimport collections from \"@/services/collections\";\n\nexport default {\n  components: {\n    avatar: () => import(\"@/tkViews/components/layout/Avatar\"),\n    buttonWithLoading: () => import(\"../components/layout/ButtonWithLoading\"),\n    FadeTransition,\n    alert: () => import(\"../components/Modal/Alert\"),\n  },\n  data() {\n    return {\n      model: {\n        fullName: \"\",\n        email: \"\",\n        password: \"\",\n        password2: \"\",\n        rememberMe: false,\n        userId: \"\",\n        studioId: \"\",\n      },\n      invalidEmail: true,\n      invalidPwd: true,\n      invalidPwd2: true,\n      email: \"zw@gmail.com\",\n      step: 1,\n      passwordNotSame: false,\n      loading: false,\n      isButtonLoadingComplete: false,\n      failed: false,\n      failedMsg: \"\",\n      alert: {\n        isShow: false,\n        title: \"\",\n        content: \"\",\n        buttons: {\n          left: {\n            title: \"\",\n            action: () => {},\n          },\n          right: {\n            title: \"\",\n            action: () => {},\n          },\n        },\n      },\n\n      marketerAccount: [],\n      isMarketer: false,\n      account: \"\"\n    };\n  },\n  created() {\n    this.getMarketer();\n  },\n  mounted() {\n    console.log(\"进入login页面\");\n  },\n  watch: {\n    failed(newVal) {\n      if (newVal) {\n        setTimeout(() => {\n          this.failed = false;\n          this.failedMsg = \"\";\n        }, 1000);\n      }\n    },\n    model: {\n      handler(newVal, oldVal) {\n        if (!this.loading) {\n          if (this.$tools.isEmail(newVal.email)) {\n            console.log(\"输入的是email\");\n            this.invalidEmail = false;\n          } else {\n            this.invalidEmail = true;\n            if ($(\"#loginAccount\").find(\".invalid-feedback\").length === 0) {\n              this.invalidEmail = false;\n            }\n          }\n\n          for (let i = 0; i < this.marketerAccount.length; i++) {\n            if (this.marketerAccount[i].account === newVal.email) {\n              this.invalidEmail = false;\n              this.isMarketer = true;\n              this.account = newVal.email;\n              setTimeout(() => {\n                $(\"#loginAccount\").find(\".invalid-feedback\").hide();\n              }, 10);\n              break;\n            } else {\n              if (i == this.marketerAccount.length - 1) {\n                this.isMarketer = false;\n                this.account = \"\";\n              }\n            }\n          }\n\n          // console.log(this.invalidEmail, newVal.email, $(\"#loginAccount\").find(\".invalid-feedback\"));\n\n          if (newVal.password.length >= 6) {\n            this.invalidPwd = false;\n          } else {\n            this.invalidPwd = true;\n          }\n\n          if (newVal.password2.length >= 6) {\n            this.invalidPwd2 = false;\n            if (newVal.password2 === newVal.password) {\n              this.passwordNotSame = false;\n            } else {\n              this.passwordNotSame = true;\n            }\n          } else {\n            this.invalidPwd2 = true;\n          }\n        }\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    async getMarketer() {\n      console.log(\"获取 market 账号信息\");\n      let self = this;\n      await collections.config\n        .doc(\"salesAccount\")\n        .get()\n        .then((doc) => {\n          if (doc.exists) {\n            self.marketerAccount = doc.data().sales;\n          }\n        });\n    },\n    getUserInfo() {\n      return new Promise(async (resolve, reject) => {\n        try {\n          let userDocs = await this.$firebase\n            .firestore()\n            .collection(\"user\")\n            .where(\"loginMethod\", \"array-contains-any\", [\n              {\n                method: 1,\n                account: this.model.email,\n              },\n              {\n                method: 2,\n                account: this.model.email,\n              },\n              {\n                method: 3,\n                account: this.model.email,\n              },\n              {\n                method: 4,\n                account: this.model.email,\n              },\n            ])\n            .get();\n          let data = [];\n          userDocs.forEach((doc) => {\n            data.push(doc.data());\n          });\n          console.log(\"获取到的用户列表：\", data);\n          if (data.length > 0) {\n            console.log(\"返回第一个用户信息：\", data[0]);\n            resolve(data[0]);\n          } else {\n            console.log(\"用户信息为空\");\n            resolve(null);\n          }\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    getTeacherInfo(userId) {\n      return new Promise(async (resolve, reject) => {\n        try {\n          let teacherDoc = await this.$firebase\n            .firestore()\n            .collection(\"teacher_info\")\n            .doc(userId)\n            .get();\n          console.log(\"获取到的教师信息: \", teacherDoc);\n          resolve(teacherDoc.data());\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    async next() {\n      let self = this;\n      if (!self.invalidEmail && !self.loading) {\n        if (!self.isMarketer) {\n          self.loading = true;\n          let userInfo = await self.getUserInfo();\n          console.log(\"获取到的用户信息：\", userInfo);\n          //判断用户是否具有相应权限\n\n          if (userInfo !== null) {\n            if (self.$tools.isTeacher(userInfo.roleIds)) {\n              let teacherInfo = await self.getTeacherInfo(userInfo.userId);\n              console.log(\"获取到的教师信息: \", teacherInfo);\n              self.isButtonLoadingComplete = true;\n              self.step = 2;\n              self.model.fullName = userInfo.name;\n              self.model.userId = userInfo.userId;\n              self.model.studioId = teacherInfo.studioId;\n            } else {\n              self.isButtonLoadingComplete = true;\n              console.log(\"当前身份是学生,退出登录\");\n            }\n          } else {\n            console.log(\"校验email是否正确\");\n            let isValid = await commons.emailValidVerify(self.model.email);\n\n            console.log(\"当前email合法性: \", isValid);\n            console.log(\"当前校验结果类型: \", typeof isValid);\n            if (isValid) {\n              console.log(\"当前email合法\");\n              self.isButtonLoadingComplete = true;\n              self.step = 3;\n              self.model.fullName = \"\";\n            } else {\n              console.log(\"Email 不合法: \", self.model.email);\n              self.alert.title = \"Wrong email\";\n              self.alert.content =\n                \"This email address \\n(\" +\n                self.model.email +\n                \") \\ndoesn't exist or temporatily couldn't receive message.\";\n              self.alert.buttons.left.title = \"Go Back\";\n              self.alert.buttons.left.action = () => {\n                self.alert.isShow = false;\n                self.isButtonLoadingComplete = true;\n              };\n              self.alert.buttons.right.title = \"Continue\";\n              self.alert.buttons.right.action = () => {\n                self.alert.title = \"Continue?\";\n                self.alert.content =\n                  \"Are you sure to continue with this wrong email address \\n(\" +\n                  self.model.email +\n                  \")?\";\n                self.alert.buttons.left.title = \"Go Back\";\n                self.alert.buttons.right.title = \"Continue\";\n                self.alert.buttons.right.action = () => {\n                  self.isButtonLoadingComplete = true;\n                  self.step = 3;\n                  self.model.fullName = \"\";\n                  self.alert.isShow = false;\n                };\n                self.alert.isShow = true;\n              };\n              self.alert.isShow = true;\n            }\n          }\n\n          self.isButtonLoadingComplete = false;\n          self.loading = false;\n        } else {\n          self.$router.push({ name: \"AdministrationLogin\", query: {account: self.account} })\n        }\n      }\n    },\n    notMe() {\n      let self = this;\n      // self.model.email = \"\";\n      self.model.fullName = \"\";\n      self.model.password = \"\";\n      self.model.password2 = \"\";\n      // self.invalidEmail = true;\n      self.invalidPwd = true;\n      self.invalidPwd2 = true;\n      self.step = 1;\n    },\n    forgotPwd() {\n      let self = this;\n    },\n    login() {\n      let self = this;\n      console.log(self.model)\n      if (!self.$tools.isNull(self.model.email)) {\n        self.loading = true;\n        // self.$router.push({ name: \"Dashboard\" })\n        self.$firebase\n          .auth()\n          .signInWithEmailAndPassword(self.model.email, self.model.password)\n          .then((user) => {\n            console.log(\"登陆成功：\", user);\n            self.loading = false;\n            self.isButtonLoadingComplete = true;\n          })\n          .catch((error) => {\n            console.error(\"登陆失败：\", error);\n            self.isButtonLoadingComplete = false;\n          });\n      }\n      self.isButtonLoadingComplete = false;\n      self.loading = false;\n    },\n    loginWithFacebook() {\n      console.log(\"ready to sign in with Facebook\");\n      let self = this;\n      if (!self.loading) {\n        let firebase = self.$firebase;\n        var provider = new firebase.auth.FacebookAuthProvider();\n        self.signIn(provider);\n      }\n    },\n    loginWithGoogle() {\n      console.log(\"ready to sign in with Google\");\n      let self = this;\n      if (!self.loading) {\n        let firebase = self.$firebase;\n        let provider = new firebase.auth.GoogleAuthProvider();\n        self.signIn(provider);\n      }\n    },\n    loginWithApple() {\n      console.log(\"ready to sign in with Apple\");\n      let self = this;\n      if (!self.loading) {\n        let firebase = self.$firebase;\n        let provider = new firebase.auth.OAuthProvider(\"apple.com\");\n        provider.addScope(\"email\");\n        provider.addScope(\"name\");\n        self.signIn(provider);\n      }\n    },\n    signIn(provider) {\n      let self = this;\n      let firebase = self.$firebase;\n      firebase\n        .auth()\n        .signInWithPopup(provider)\n        .then((result) => {\n          console.log(\"login success\");\n          let token = result.credential.accessToken;\n          localStorage.setItem(\"auth_token\", token);\n          let user = result.user;\n          localStorage.setItem(\"auth_user\", user);\n        })\n        .catch((error) => {\n          console.error(\"login failed:\", error);\n        });\n    },\n    async signup() {\n      let self = this;\n      if (\n        !self.$tools.isNull(self.model.fullName) &&\n        !self.$tools.isNull(self.model.password) &&\n        !self.$tools.isNull(self.model.password2) &&\n        !self.loading\n      ) {\n        console.log(\"点击注册\");\n        let isValid = await commons.emailValidVerify(this.model.email);\n        if (!isValid) {\n          this.$notify({\n            message: \"The email is wrong\",\n            type: \"warning\",\n          });\n        }\n        console.log(\"校验结果: \", isValid);\n        self.loading = true;\n        let firebase = self.$firebase;\n        let teacherSignup = firebase.functions().httpsCallable(\"teacherSignup\");\n        let result = await teacherSignup({\n          email: self.model.email,\n          password: self.model.password,\n          fullName: self.model.fullName,\n        });\n        console.log(\"获取到的注册结果: \", result);\n        if (result.data) {\n          if (result.data.code === 0) {\n            this.login();\n          } else {\n            console.log(\"sign up failed: \", result);\n          }\n        } else {\n          console.error(\"sign up failed: \", result);\n        }\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=7379838c&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}"],"sourceRoot":""}