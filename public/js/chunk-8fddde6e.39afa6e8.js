(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8fddde6e"],{"06cb":function(e,t,n){"use strict";t.__esModule=!0;var s=n("a593"),o=r(s),a=n("c865");function r(e){return e&&e.__esModule?e:{default:e}}var i=[],l="@@clickoutsideContext",c=void 0,u=0;function d(e,t,n){return function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&s.target&&o.target)||e.contains(s.target)||e.contains(o.target)||e===s.target||n.context.popperElm&&(n.context.popperElm.contains(s.target)||n.context.popperElm.contains(o.target))||(t.expression&&e[l].methodName&&n.context[e[l].methodName]?n.context[e[l].methodName]():e[l].bindingFn&&e[l].bindingFn())}}!o.default.prototype.$isServer&&(0,a.on)(document,"mousedown",(function(e){return c=e})),!o.default.prototype.$isServer&&(0,a.on)(document,"mouseup",(function(e){i.forEach((function(t){return t[l].documentHandler(e,c)}))})),t.default={bind:function(e,t,n){i.push(e);var s=u++;e[l]={id:s,documentHandler:d(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[l].documentHandler=d(e,t,n),e[l].methodName=t.expression,e[l].bindingFn=t.value},unbind:function(e){for(var t=i.length,n=0;n<t;n++)if(i[n][l].id===e[l].id){i.splice(n,1);break}delete e[l]}}},"53c6":function(e,t,n){"use strict";n.r(t);var s,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("base-header",{staticClass:"pb-6"},[n("div",{staticClass:"row align-items-center py-4"},[n("div",{staticClass:"col-lg-6 col-7"},[n("h6",{staticClass:"h2 text-white d-inline-block mb-0"},[e._v("My Profile")])]),n("div",{staticClass:"col-lg-6 col-5 text-right"})])]),n("div",{staticClass:"container-fluid mt--6"},[n("card",{attrs:{isLoading:e.isProfileDataLoading,minHeight:"400"}},[n("div",{staticClass:"row justify-content-center"},[n("div",[n("div",{staticClass:"avatar avatar-xl rounded-circle tk-layout-inline-block tk-position-relative tk-avatar-outer tk-bg-color-white tk-border-color-main"},[n("avatar",{attrs:{uId:e.model.user.userId,name:e.model.user.name}})],1),n("div",{staticClass:"tk-layout-inline-block tk-cursor-pointer tk-font-color-main tk-px-margin-left-px24"},[n("span",[e._v("Change Photo")]),n("dropzone-file-upload",{staticClass:"tk-position-absolute tk-profile-upload-avatar",staticStyle:{top:"48px",opacity:"0"},attrs:{id:"uploadAvatar",multiple:!1},model:{value:e.fileSingle,callback:function(t){e.fileSingle=t},expression:"fileSingle"}})],1)])]),n("div",{staticClass:"row tk-px-margin-top-px30"},[n("div",{staticClass:"col-lg-3 col-md-6"},[n("span",[n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-control-label"},[e._v("Full Name")]),n("div",{staticClass:"has-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.user.name,expression:"model.user.name"}],staticClass:"form-control form-control-muted tk-border-bottom tk-font-color-black1",attrs:{type:"text"},domProps:{value:e.model.user.name},on:{keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.model.user,"name",t.target.value)}}})])])])]),n("div",{staticClass:"col-lg-3 col-md-6"},[n("span",[n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-control-label"},[e._v("Email")]),n("div",{staticClass:"has-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.user.email,expression:"model.user.email"}],staticClass:"form-control form-control-muted tk-border-bottom tk-font-color-black1",class:{"is-invalid":e.isInvalid},attrs:{type:"email"},domProps:{value:e.model.user.email},on:{blur:function(t){return t.preventDefault(),e.validationEmail(t)},keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.model.user,"email",t.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isInvalid,expression:"isInvalid"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v(" The email is not correct. ")])])])]),n("div",{staticClass:"col-lg-3 col-md-6"},[n("span",[n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-control-label"},[e._v("Phone")]),n("div",{staticClass:"has-label"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-prepend tk-px-width-px90"},[n("span",{staticClass:"input-group-text tk-border-bottom tk-px-width-px90 tk-text-center",staticStyle:{padding:"0"}},[n("el-select",{staticClass:"tk-select-border-none tk-border-bottom tk-select-bg-mute",model:{value:e.countryCodeSelected,callback:function(t){e.countryCodeSelected=t},expression:"countryCodeSelected"}},e._l(e.countrySelects.options,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label+"  "+e.areaCode,value:e.value}})})),1)],1)]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.user.phone,expression:"model.user.phone"}],staticClass:"form-control form-control-muted tk-border-bottom tk-font-color-black1",attrs:{type:"text"},domProps:{value:e.model.user.phone},on:{keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.model.user,"phone",t.target.value)}}})])])])])]),n("div",{staticClass:"col-lg-3 col-md-6"},[n("span",[n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-control-label"},[e._v("Url")]),n("div",{staticClass:"has-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.user.website,expression:"model.user.website"}],staticClass:"form-control form-control-muted tk-border-bottom tk-font-color-black1",attrs:{type:"text"},domProps:{value:e.model.user.website},on:{keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.model.user,"website",t.target.value)}}})])])])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("label",{staticClass:"form-control-label"},[e._v("Permissions")])]),n("div",{staticClass:"col-lg-3 col-md-4"},[n("span",[n("div",{staticClass:"form-group"},[n("div",[n("div",{staticClass:"form-control form-control-muted"},[n("span",{staticClass:"tk-layout-inline-block tk-font-color-black1",staticStyle:{width:"calc(100% - 56px)"}},[e._v("Studio Profile")]),n("tk-switch",{staticClass:"mr-1 tk-layout-inline-block",attrs:{type:"main"},on:{input:e.onStudioProfileChanged},model:{value:e.model.teacherPermissions.studioProfile,callback:function(t){e.$set(e.model.teacherPermissions,"studioProfile",t)},expression:"model.teacherPermissions.studioProfile"}})],1)])])])]),n("div",{staticClass:"col-lg-3 col-md-4"},[n("span",[n("div",{staticClass:"form-group"},[n("div",[n("div",{staticClass:"form-control form-control-muted"},[n("span",{staticClass:"tk-layout-inline-block tk-font-color-black1",staticStyle:{width:"calc(100% - 56px)"}},[e._v("Teacher Profile")]),n("tk-switch",{staticClass:"mr-1 tk-layout-inline-block",attrs:{type:"main"},on:{input:e.onTeacherProfileChanged},model:{value:e.model.teacherPermissions.teacherProfile,callback:function(t){e.$set(e.model.teacherPermissions,"teacherProfile",t)},expression:"model.teacherPermissions.teacherProfile"}})],1)])])])]),n("div",{staticClass:"col-lg-3 col-md-4"},[n("span",[n("div",{staticClass:"form-group"},[n("div",[n("div",{staticClass:"form-control form-control-muted"},[n("span",{staticClass:"tk-layout-inline-block tk-font-color-black1",staticStyle:{width:"calc(100% - 56px)"}},[e._v("Scheduling")]),n("tk-switch",{staticClass:"mr-1 tk-layout-inline-block",attrs:{type:"main"},on:{input:e.onSchedulingChanged},model:{value:e.model.teacherPermissions.scheduling,callback:function(t){e.$set(e.model.teacherPermissions,"scheduling",t)},expression:"model.teacherPermissions.scheduling"}})],1)])])])]),n("div",{staticClass:"col-lg-3 col-md-4"},[n("span",[n("div",{staticClass:"form-group"},[n("div",[n("div",{staticClass:"form-control form-control-muted"},[n("span",{staticClass:"tk-layout-inline-block tk-font-color-black1",staticStyle:{width:"calc(100% - 56px)"}},[e._v("Billing")]),n("tk-switch",{staticClass:"mr-1 tk-layout-inline-block",attrs:{type:"main"},on:{input:e.onBillingChanged},model:{value:e.model.teacherPermissions.billing,callback:function(t){e.$set(e.model.teacherPermissions,"billing",t)},expression:"model.teacherPermissions.billing"}})],1)])])])]),n("div",{staticClass:"col-lg-3 col-md-4"},[n("span",[n("div",{staticClass:"form-group"},[n("div",[n("div",{staticClass:"form-control form-control-muted"},[n("span",{staticClass:"tk-layout-inline-block tk-font-color-black1",staticStyle:{width:"calc(100% - 56px)"}},[e._v("Admin")]),n("tk-switch",{staticClass:"mr-1 tk-layout-inline-block",attrs:{type:"main"},on:{input:e.onAdminChanged},model:{value:e.model.teacherPermissions.admin,callback:function(t){e.$set(e.model.teacherPermissions,"admin",t)},expression:"model.teacherPermissions.admin"}})],1)])])])]),n("div",{staticClass:"col-lg-3 col-md-4"},[n("span",[n("div",{staticClass:"form-group"},[n("div",[n("div",{staticClass:"form-control form-control-muted"},[n("span",{staticClass:"tk-layout-inline-block tk-font-color-black1",staticStyle:{width:"calc(100% - 56px)"}},[e._v("Insights")]),n("tk-switch",{staticClass:"mr-1 tk-layout-inline-block",attrs:{type:"main"},on:{input:e.onInsightsChanged},model:{value:e.model.teacherPermissions.insights,callback:function(t){e.$set(e.model.teacherPermissions,"insights",t)},expression:"model.teacherPermissions.insights"}})],1)])])])])])])],1)],1)},a=[],r=(n("eb5b"),n("c585"),n("6a61"),n("2e91")),i=n("28f8"),l=(n("9102"),n("2984"),n("3aa8")),c=n.n(l),u=(n("086f"),n("ce6c")),d=n.n(u),m=n("fdc1"),p=n("fef9"),f=n("5e3a"),h={components:(s={},Object(i["a"])(s,d.a.name,d.a),Object(i["a"])(s,c.a.name,c.a),Object(i["a"])(s,"DropzoneFileUpload",(function(){return n.e("chunk-2d221853").then(n.bind(null,"cb64"))})),Object(i["a"])(s,"avatar",(function(){return Promise.resolve().then(n.bind(null,"7a12"))})),Object(i["a"])(s,"Card",(function(){return n.e("chunk-2dcbdd0a").then(n.bind(null,"9018"))})),Object(i["a"])(s,"tkSwitch",(function(){return n.e("chunk-770cae1f").then(n.bind(null,"c4b26"))})),s),data:function(){return{isInvalid:!1,countryCodeSelected:"+1",countrySelects:this.$tools.countrySelects,fileSingle:[],userId:"",studioId:"",isProfileDataLoading:!0,model:{user:{userId:"",name:"",phone:"",email:"",website:""},studio:{id:"",memberLevelId:1,name:"",storefrontColor:""},teacherPermissions:{userId:"",studioProfile:!1,admin:!1,teacherProfile:!0,scheduling:!1,billing:!1,insights:!1}}}},watch:{fileSingle:function(e,t){var n=this;setTimeout((function(){console.log(e[0]),console.log(e[0].dataURL),n.avatarUrl=e[0].dataURL}),200)}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,s,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.next=3,p["a"].studioInfo();case 3:return s=t.sent,n.model.studio=s,console.log("获取到的Studio信息: ",s),o=m["a"].userId(),f["a"].user.doc(o).onSnapshot((function(e){console.log("监听的数据: ",e.data()),e.exists&&(n.model.user=e.data())})),t.next=10,p["a"].teacherPermissions.get();case 10:a=t.sent,n.model.teacherPermissions=a,n.isProfileDataLoading=!1;case 13:case"end":return t.stop()}}),t)})))()},methods:{onStudioProfileChanged:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("点击studioProfile"),t.next=3,e.updateTeacherPromissions();case 3:case"end":return t.stop()}}),t)})))()},onAdminChanged:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("点击Admin"),t.next=3,e.updateTeacherPromissions();case 3:case"end":return t.stop()}}),t)})))()},onTeacherProfileChanged:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("点击TeacherProfile"),t.next=3,e.updateTeacherPromissions();case 3:case"end":return t.stop()}}),t)})))()},onSchedulingChanged:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("点击Scheduling"),t.next=3,e.updateTeacherPromissions();case 3:case"end":return t.stop()}}),t)})))()},onBillingChanged:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("点击Billing"),t.next=3,e.updateTeacherPromissions();case 3:case"end":return t.stop()}}),t)})))()},onInsightsChanged:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("点击Insights"),t.next=3,e.updateTeacherPromissions();case 3:case"end":return t.stop()}}),t)})))()},updateTeacherPromissions:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.abrupt("return",new Promise(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,s){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o=n.model.teacherPermissions,e.next=4,p["a"].teacherPermissions.update(o);case 4:t(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),s(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})))()},change:function(e){console.log(e)},validationEmail:function(){var e=this;e.$tools.isNull(e.model.user.email)?e.isInvalid=!1:e.isInvalid=!e.$tools.isEmail(e.model.user.email)}}},g=h,v=n("c701"),k=Object(v["a"])(g,o,a,!1,null,null,null);t["default"]=k.exports},"5e3a":function(e,t,n){"use strict";var s=n("1543");function o(e){return s["a"].firestore().collection(e)}t["a"]={user:o("user"),userOnline:o("user_online"),userUnreadCount:o("user_unread_count"),instrument:o("instrument"),teacher:o("teacher_info"),teacherStudentList:o("students_list"),policies:o("policy"),lessonType:o("lesson_type"),studio:o("studio_info"),cache:o("cache"),makeupPolicy:o("makeup_policy"),cancellationPolicy:o("cancellation_policy"),lessonSchedule:o("lesson_schedule"),lessonReschedule:o("lesson_reschedule"),lessonSchedulePlan:o("lesson_schedule_plan"),lessonScheduleMaterial:o("lesson_schedule_material"),lessonScheduleAssignment:o("lesson_schedule_assignment"),practice:o("practice"),achievement:o("achievement"),material:o("material"),materialHash:o("material_hash"),materialAccessControl:o("material_access_control"),student:o("student_info"),lessonScheduleConfigure:o("lesson_schedule_config"),eventConfig:o("event_config"),block:o("block"),userNotificationConfig:o("user_notification_config"),insightsCount:o("insights_count"),rescheduleMakeupRefund:o("student_reschedule_makeup_refund_history"),lessonCancellation:o("lesson_cancellation"),allowSwapStatistics:o("allow_swap_statistics"),calendarLinkSetting:o("calendar_link_setting"),googleCalendarEvents:o("google_calendar_events"),googleCalendarEventsWatch:o("google_calendar_events_watch"),userNotifications:o("user_notifications"),bugReports:o("bug_reports"),teacherReschedules:o("teacher_reschedules"),errors:o("tk_errors"),couponHistory:o("promo_codes_history"),userReceipt:o("user_receipt"),accessTokenGoogle:o("access_token_google"),appSessions:o("app_sessions"),appSessionActions:o("app_sessions_actions"),appEvents:o("app_events"),config:o("config"),googleEmail:o("google_email"),googleAccessTokenCalendar:o("google_access_token_calendar"),googleAccessTokenDrive:o("google_access_token_drive"),googleAccessTokenPhotos:o("google_access_token_photos"),googleCalendarEventsSyncToken:o("google_calendar_events_sync_token"),teacherPermissions:o("teacher_permissions")}},fef9:function(e,t,n){"use strict";n("c585"),n("6a61");var s=n("2e91"),o=(n("43ea"),n("fdc1")),a=n("5e3a");t["a"]={userInfo:function(){return new Promise(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=o["a"].userId(),e.next=4,a["a"].user.doc(s).get();case 4:r=e.sent,r&&r.exists?(localStorage.setItem("userInfo",JSON.stringify(r.data())),t(r.data())):t(null),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}())},teacherInfo:function(){return new Promise(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=o["a"].userId(),e.next=4,a["a"].teacher.doc(s).get();case 4:r=e.sent,r&&r.exists?(localStorage.setItem("teacherInfo",JSON.stringify(r.data())),t(r.data())):t(null),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}())},studioInfo:function(){var e=this;return new Promise(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n,s){var o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.teacherInfo();case 3:if(o=t.sent,!o||!o.studioId){t.next=12;break}return t.next=7,a["a"].studio.doc(o.studioId).get();case 7:if(r=t.sent,!r||!r.exists){t.next=12;break}return localStorage.setItem("studioInfo",JSON.stringify(r.data())),n(r.data()),t.abrupt("return");case 12:n(null),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),s(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,n){return t.apply(this,arguments)}}())},teacherPermissions:{get:function(){return new Promise(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var s,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=o["a"].userId(),e.next=4,a["a"].teacherPermissions.doc(s).get();case 4:if(r=e.sent,!r.exists){e.next=9;break}t(r.data()),e.next=13;break;case 9:return i={userId:s,studioProfile:!1,teacherProfile:!0,admin:!1,scheduling:!0,billing:!0,insights:!0},e.next=12,a["a"].teacherPermissions.doc(s).set(i);case 12:t(i);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),n(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}())},update:function(e){return new Promise(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n,s){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=o["a"].userId(),e["userId"]=r,t.next=5,a["a"].teacherPermissions.doc(r).set(e);case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),s(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())}}}}}]);
//# sourceMappingURL=chunk-8fddde6e.39afa6e8.js.map